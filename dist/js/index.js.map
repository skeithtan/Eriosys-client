{"version":3,"sources":["../../js/index.js"],"names":["isLoggedIn","localStorage","token","undefined","spinner","signInBox","css","settings","progressBar","setTimeout","onSignIn","showSignInBox","signInMessage","hide","click","attemptSignIn","on","event","which","username","val","password","post","url","serverURL","data","success","response","error","console","log","statusCode","text","show","shouldShow","renderReact","signInView","render","document","getElementById"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAGA,sBAAE,YAAM;AACJ,QAAMA,aAAaC,aAAaC,KAAb,KAAuBC,SAA1C;AACA,QAAMC,UAAU,sBAAE,kBAAF,CAAhB;AACA,QAAMC,YAAY,sBAAE,cAAF,CAAlB;AACAA,cAAUC,GAAV,CAAc,SAAd,EAAyB,CAAzB;;AAEA;AACA,uBAASC,QAAT,CAAkB;AACfC,qBAAa;AADE,KAAlB;;AAIAC,eAAW,YAAM;AACb,YAAIT,UAAJ,EAAgB;AACZU;AACA;AACH;;AAEDC,sBAAc,IAAd;AACH,KAPD,EAOG,GAPH;;AAUA,QAAMC,gBAAgB,sBAAE,kBAAF,CAAtB;AACAA,kBAAcC,IAAd;;AAEA,0BAAE,iBAAF,EAAqBC,KAArB,CAA2BC,aAA3B;AACA,0BAAE,iBAAF,EAAqBC,EAArB,CAAwB,SAAxB,EAAmC,iBAAS;AACxC,YAAIC,MAAMC,KAAN,KAAgB,EAApB,EAAwB;AACpBH;AACH;AACJ,KAJD;;AAMA,aAASA,aAAT,GAAyB;AACrB,YAAMI,WAAW,sBAAE,iBAAF,EAAqBC,GAArB,EAAjB;AACA,YAAMC,WAAW,sBAAE,iBAAF,EAAqBD,GAArB,EAAjB;;AAEAT,sBAAc,KAAd;;AAEA,yBAAEW,IAAF,CAAO;AACHC,iBAAS,mBAASC,SAAlB,cADG;AAEHC,kBAAO;AACHN,0BAAWA,QADR;AAEHE,0BAAWA;AAFR,aAFJ;AAMHK,qBAAU,2BAAY;AAClBzB,6BAAaC,KAAb,GAAqByB,SAASzB,KAA9B;AACAD,6BAAakB,QAAb,GAAwBQ,SAASR,QAAjC;AACAT;AACH,aAVE;AAWHkB,mBAAQ,yBAAY;AAChBC,wBAAQC,GAAR,CAAYH,QAAZ;AACA,wBAAQA,SAASI,UAAjB;AACI,yBAAK,GAAL;AACInB,sCAAcoB,IAAd,GAAqB,qBAArB;AACA;AACJ;AACIpB,sCAAcoB,IAAd,GAAqB,iCAArB;AACA;AANR;;AASApB,8BAAcqB,IAAd;AACAtB,8BAAc,IAAd;AACH;AAxBE,SAAP;AA0BH;;AAED,aAASA,aAAT,CAAuBuB,UAAvB,EAAmC;AAC/B7B,kBAAUC,GAAV,CAAc,SAAd,EAAyB4B,aAAa,CAAb,GAAiB,CAA1C;AACA9B,gBAAQE,GAAR,CAAY,SAAZ,EAAuB4B,aAAa,CAAb,GAAiB,CAAxC;AACH;;AAED,aAASxB,QAAT,GAAoB;AAChByB;;AAEA1B,mBAAW,YAAM;AACb,gBAAM2B,aAAa,sBAAE,UAAF,CAAnB;AACAA,uBAAW9B,GAAX,CAAe;AACX,2BAAY,CADD;AAEX,kCAAmB;AAFR,aAAf;AAIH,SAND,EAMG,GANH;AAOH;;AAED,aAAS6B,WAAT,GAAuB;AACnB,2BAASE,MAAT,CAAgB,kDAAhB,EAAwBC,SAASC,cAAT,CAAwB,MAAxB,CAAxB;AACH;AAGJ,CAvFD","file":"index.js","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./app\";\nimport $ from \"jquery\";\nimport settings from \"./settings\";\nimport iziToast from \"izitoast\";\n\n\n$(() => {\n    const isLoggedIn = localStorage.token !== undefined;\n    const spinner = $(\"#sign-in-spinner\");\n    const signInBox = $(\"#sign-in-box\");\n    signInBox.css(\"opacity\", 0);\n\n    //Default iziToast settings\n    iziToast.settings({\n       progressBar: false\n    });\n\n    setTimeout(() => {\n        if (isLoggedIn) {\n            onSignIn();\n            return;\n        }\n\n        showSignInBox(true);\n    }, 500);\n\n\n    const signInMessage = $(\"#sign-in-message\");\n    signInMessage.hide();\n\n    $(\"#sign-in-button\").click(attemptSignIn);\n    $(\"#password-input\").on(\"keydown\", event => {\n        if (event.which === 13) {\n            attemptSignIn();\n        }\n    });\n\n    function attemptSignIn() {\n        const username = $(\"#username-input\").val();\n        const password = $(\"#password-input\").val();\n\n        showSignInBox(false);\n\n        $.post({\n            url : `${settings.serverURL}/sign-in/`,\n            data : {\n                username : username,\n                password : password,\n            },\n            success : response => {\n                localStorage.token = response.token;\n                localStorage.username = response.username;\n                onSignIn();\n            },\n            error : response => {\n                console.log(response);\n                switch (response.statusCode) {\n                    case 401:\n                        signInMessage.text = \"Invalid credentials\";\n                        break;\n                    default:\n                        signInMessage.text = \"Could not connect to the server\";\n                        break;\n                }\n\n                signInMessage.show();\n                showSignInBox(true);\n            },\n        });\n    }\n\n    function showSignInBox(shouldShow) {\n        signInBox.css(\"opacity\", shouldShow ? 1 : 0);\n        spinner.css(\"opacity\", shouldShow ? 0 : 1);\n    }\n\n    function onSignIn() {\n        renderReact();\n\n        setTimeout(() => {\n            const signInView = $(\"#sign-in\");\n            signInView.css({\n                \"opacity\" : 0,\n                \"pointer-events\" : \"none\",\n            });\n        }, 700);\n    }\n\n    function renderReact() {\n        ReactDOM.render(<App/>, document.getElementById(\"root\"));\n    }\n\n\n});"]}