{"version":3,"sources":["../../../../js/tabs/OutboundPrograms/sidebar_panes.js"],"names":["fetchAcademicYear","id","onResult","query","then","termsIsFetched","year","terms","undefined","AcademicYearSidebarPane","props","state","editAcademicYearIsShowing","deleteAcademicYearIsShowing","academicYear","academic_year_start","result","setState","academicYearFull","parseInt","map","term","TermSection","startDate","start_date","format","endDate","end_date","number","ProgramsSidebarPane","program","name","institution"],"mappings":";;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AAQA;;;;AACA;;;;;;;;;;AAGA,SAASA,iBAAT,CAA2BC,EAA3B,EAA+BC,QAA/B,EAAyC;AACrC,sBAAQC,KAAR,kCAEiBF,EAFjB,oHASGG,IATH,CASQF,QATR;AAUH;;AAED,SAASG,cAAT,CAAwBC,IAAxB,EAA8B;AAC1B,WAAOA,KAAKC,KAAL,KAAeC,SAAtB;AACH;;IAEKC,uB;;;AACF,qCAAYC,KAAZ,EAAmB;AAAA;;AAAA,sJACTA,KADS;;AAGf,cAAKC,KAAL,GAAa;AACTC,uCAA4B,KADnB;AAETC,yCAA8B,KAFrB;AAGTC,0BAAeJ,MAAMI;AAHZ,SAAb;;AAMA,YAAI,CAACT,eAAeK,MAAMI,YAArB,CAAL,EAAyC;AACrCd,8BAAkBU,MAAMI,YAAN,CAAmBC,mBAArC,EAA0D,kBAAU;AAChEL,sBAAMI,YAAN,CAAmBP,KAAnB,GAA2BS,OAAOT,KAAlC;;AAEA,sBAAKU,QAAL,CAAc;AACVH,kCAAeJ,MAAMI;AADX,iBAAd;AAGH,aAND;AAOH;AAjBc;AAkBlB;;;;kDAEyBJ,K,EAAO;AAAA;;AAC7B,iBAAKO,QAAL,CAAc;AACVH,8BAAeJ,MAAMI;AADX,aAAd;;AAIA,gBAAI,CAACT,eAAeK,MAAMI,YAArB,CAAL,EAAyC;AACrCd,kCAAkBU,MAAMI,YAAN,CAAmBC,mBAArC,EAA0D,kBAAU;AAChEL,0BAAMI,YAAN,CAAmBP,KAAnB,GAA2BS,OAAOT,KAAlC;;AAEA,2BAAKU,QAAL,CAAc;AACVH,sCAAeJ,MAAMI;AADX,qBAAd;AAGH,iBAND;AAOH;AACJ;;;iCAEQ;AACL,gBAAMA,eAAe,KAAKH,KAAL,CAAWG,YAAhC;;AAEA,gBAAI,CAACT,eAAeS,YAAf,CAAL,EAAmC;AAC/B,uBAAO,sDAAP;AACH;;AAED,gBAAMI,mBAAsBJ,aAAaC,mBAAnC,YAA4DI,SAASL,aAAaC,mBAAtB,IAA6C,CAAzG,CAAN;;AAEA,gBAAMR,QAAQO,aAAaP,KAAb,CAAmBa,GAAnB,CAAuB,gBAAQ;AACzC,uBAAO,8BAAC,WAAD,IAAa,MAAMC,IAAnB;AACa,yBAAKA,KAAKpB,EADvB,GAAP;AAEH,aAHa,CAAd;;AAKA,mBACI;AAAA;AAAA,kBAAK,WAAU,8BAAf;AACI;AAAA;AAAA,sBAAK,WAAU,gDAAf;AACI;AAAA;AAAA,0BAAK,WAAU,SAAf;AACI;AAAA;AAAA,8BAAI,WAAU,MAAd;AAAA;AAAoCiB;AAApC;AADJ;AADJ,iBADJ;AAOI;AAAA;AAAA,sBAAK,WAAU,WAAf;AACI;AAAA;AAAA;AACI;AAAA;AAAA;AAAA;AAAA,yBADJ;AAEI;AAAA;AAAA;AACI;AAAA;AAAA;AACI;AAAA;AAAA;AAAA;AAAA,iCADJ;AAEI;AAAA;AAAA;AAAoBA;AAApB;AAFJ,6BADJ;AAKI;AAAA;AAAA,kCAAY,WAAU,yCAAtB;AACI;AAAA;AAAA,sCAAQ,aAAR;AACQ,+CAAM,SADd;AAEQ,8CAAK,IAFb;AAAA;AAAA;AADJ;AALJ;AAFJ,qBADJ;AAgBKX;AAhBL;AAPJ,aADJ;AA6BH;;;;;;IAGCe,W;;;AACF,yBAAYZ,KAAZ,EAAmB;AAAA;;AAAA,yHACTA,KADS;AAElB;;;;iCAEQ;AACL,gBAAMa,YAAY,sBAAO,KAAKb,KAAL,CAAWW,IAAX,CAAgBG,UAAvB,EAAmCC,MAAnC,CAA0C,IAA1C,CAAlB;AACA,gBAAMC,UAAU,sBAAO,KAAKhB,KAAL,CAAWW,IAAX,CAAgBM,QAAvB,EAAiCF,MAAjC,CAAwC,IAAxC,CAAhB;;AAGA,mBACI;AAAA;AAAA;AACI;AAAA;AAAA;AAAA;AAAoB,yBAAKf,KAAL,CAAWW,IAAX,CAAgBO;AAApC,iBADJ;AAEI;AAAA;AAAA;AACI;AAAA;AAAA;AACI;AAAA;AAAA;AAAA;AAAA,yBADJ;AAEI;AAAA;AAAA;AAAoBL;AAApB;AAFJ,qBADJ;AAKI;AAAA;AAAA;AACI;AAAA;AAAA;AAAA;AAAA,yBADJ;AAEI;AAAA;AAAA;AAAoBG;AAApB;AAFJ;AALJ;AAFJ,aADJ;AAeH;;;;;;IAGCG,mB;;;AACF,iCAAYnB,KAAZ,EAAmB;AAAA;;AAAA,yIACTA,KADS;AAElB;;;;iCAEQ;AACL,mBACI;AAAA;AAAA,kBAAK,WAAU,8BAAf;AACI;AAAA;AAAA,sBAAK,WAAU,gDAAf;AACI;AAAA;AAAA,0BAAK,WAAU,SAAf;AACI;AAAA;AAAA,8BAAI,WAAU,MAAd;AAAsB,iCAAKA,KAAL,CAAWoB,OAAX,CAAmBC;AAAzC;AADJ;AADJ,iBADJ;AAOI;AAAA;AAAA,sBAAK,WAAU,WAAf;AACI;AAAA;AAAA;AACI;AAAA;AAAA;AAAA;AAAA,yBADJ;AAEI;AAAA;AAAA;AACI;AAAA;AAAA;AACI;AAAA;AAAA;AAAA;AAAA,iCADJ;AAEI;AAAA;AAAA;AAAoB,yCAAKrB,KAAL,CAAWoB,OAAX,CAAmBC;AAAvC;AAFJ,6BADJ;AAKI;AAAA;AAAA;AACI;AAAA;AAAA;AAAA;AAAA,iCADJ;AAEI;AAAA;AAAA;AAAoB,yCAAKrB,KAAL,CAAWoB,OAAX,CAAmBE,WAAnB,CAA+BD;AAAnD;AAFJ;AALJ;AAFJ;AADJ;AAPJ,aADJ;AA2BH;;;;;;QAGItB,uB,GAAAA,uB;QAAyBoB,mB,GAAAA,mB","file":"sidebar_panes.js","sourcesContent":["import React, { Component } from \"react\";\nimport graphql from \"../../graphql\";\nimport LoadingSpinner from \"../../components/loading\";\nimport {\n    Section,\n    SectionRow,\n    SectionRowContent,\n    SectionRowTitle,\n    SectionTable,\n    SectionTitle,\n} from \"../../components/section\";\nimport moment from \"moment\";\nimport { Button } from \"reactstrap\";\n\n\nfunction fetchAcademicYear(id, onResult) {\n    graphql.query(`\n    {\n        terms(year:${id}) {\n            id\n            number\n            start_date\n            end_date\n        }\n    }\n    `).then(onResult);\n}\n\nfunction termsIsFetched(year) {\n    return year.terms !== undefined;\n}\n\nclass AcademicYearSidebarPane extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            editAcademicYearIsShowing : false,\n            deleteAcademicYearIsShowing : false,\n            academicYear : props.academicYear,\n        };\n\n        if (!termsIsFetched(props.academicYear)) {\n            fetchAcademicYear(props.academicYear.academic_year_start, result => {\n                props.academicYear.terms = result.terms;\n\n                this.setState({\n                    academicYear : props.academicYear,\n                });\n            });\n        }\n    }\n\n    componentWillReceiveProps(props) {\n        this.setState({\n            academicYear : props.academicYear,\n        });\n\n        if (!termsIsFetched(props.academicYear)) {\n            fetchAcademicYear(props.academicYear.academic_year_start, result => {\n                props.academicYear.terms = result.terms;\n\n                this.setState({\n                    academicYear : props.academicYear,\n                });\n            });\n        }\n    }\n\n    render() {\n        const academicYear = this.state.academicYear;\n\n        if (!termsIsFetched(academicYear)) {\n            return <LoadingSpinner/>;\n        }\n\n        const academicYearFull = `${academicYear.academic_year_start} - ${parseInt(academicYear.academic_year_start) + 1}`;\n\n        const terms = academicYear.terms.map(term => {\n            return <TermSection term={term}\n                                key={term.id}/>;\n        });\n\n        return (\n            <div className=\"p-0 h-100 d-flex flex-column\">\n                <div className=\"page-head pt-5 d-flex flex-row align-items-end\">\n                    <div className=\"mr-auto\">\n                        <h5 className=\"mb-0\">Academic Year {academicYearFull}</h5>\n                    </div>\n                </div>\n\n                <div className=\"page-body\">\n                    <Section>\n                        <SectionTitle>Details</SectionTitle>\n                        <SectionTable>\n                            <SectionRow>\n                                <SectionRowTitle>Academic Year</SectionRowTitle>\n                                <SectionRowContent>{academicYearFull}</SectionRowContent>\n                            </SectionRow>\n                            <SectionRow className=\"d-flex flex-row justify-content-between\">\n                                <Button outline\n                                        color=\"success\"\n                                        size=\"sm\">Edit Academic Year</Button>\n                            </SectionRow>\n                        </SectionTable>\n                    </Section>\n\n                    {terms}\n                </div>\n            </div>\n        );\n\n    }\n}\n\nclass TermSection extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const startDate = moment(this.props.term.start_date).format(\"LL\");\n        const endDate = moment(this.props.term.end_date).format(\"LL\");\n\n\n        return (\n            <Section>\n                <SectionTitle>Term {this.props.term.number}</SectionTitle>\n                <SectionTable>\n                    <SectionRow>\n                        <SectionRowTitle>Start Date</SectionRowTitle>\n                        <SectionRowContent>{startDate}</SectionRowContent>\n                    </SectionRow>\n                    <SectionRow>\n                        <SectionRowTitle>End Date</SectionRowTitle>\n                        <SectionRowContent>{endDate}</SectionRowContent>\n                    </SectionRow>\n                </SectionTable>\n            </Section>\n        );\n    }\n}\n\nclass ProgramsSidebarPane extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className=\"p-0 h-100 d-flex flex-column\">\n                <div className=\"page-head pt-5 d-flex flex-row align-items-end\">\n                    <div className=\"mr-auto\">\n                        <h5 className=\"mb-0\">{this.props.program.name}</h5>\n                    </div>\n                </div>\n\n                <div className=\"page-body\">\n                    <Section>\n                        <SectionTitle>Details</SectionTitle>\n                        <SectionTable>\n                            <SectionRow>\n                                <SectionRowTitle>Name</SectionRowTitle>\n                                <SectionRowContent>{this.props.program.name}</SectionRowContent>\n                            </SectionRow>\n                            <SectionRow>\n                                <SectionRowTitle>Institution Name</SectionRowTitle>\n                                <SectionRowContent>{this.props.program.institution.name}</SectionRowContent>\n                            </SectionRow>\n                        </SectionTable>\n                    </Section>\n\n                </div>\n            </div>\n\n        );\n    }\n}\n\nexport { AcademicYearSidebarPane, ProgramsSidebarPane };"]}