{"version":3,"sources":["../../../../js/tabs/InboundPrograms/inbound_programs.js"],"names":["fetchYears","onResult","query","then","fetchPrograms","year","term","fetchStudents","id","InboundPrograms","props","state","yearList","programList","activeYear","activeTerm","activeProgram","studentList","sidebarContent","setSidebarContent","bind","refreshYears","setActiveYear","setActiveTerm","setActiveProgram","setState","academic_year_start","result","inbound_programs","program","inbound_program","inboundstudentprogram_set","academic_years"],"mappings":"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","file":"inbound_programs.js","sourcesContent":["import React, { Component } from \"react\";\nimport graphql from \"../../graphql\";\nimport YearList from \"../OutboundPrograms/year_list\";\nimport ProgramList from \"./inbound_program_list\";\nimport StudentList from \"./student_list\";\nimport {\n    AcademicYearSidebarPane,\n    ProgramsSidebarPane,\n} from \"../OutboundPrograms/sidebar_panes\";\n\nfunction fetchYears(onResult) {\n    graphql.query(`\n    {\n        academic_years {\n            academic_year_start\n        }\n    }\n    `).then(onResult);\n}\n\nfunction fetchPrograms(year, term, onResult) {\n    graphql.query(`\n    {\n        inbound_programs(year:${year}, term:${term}) {\n            id\n            name\n        }\n    }\n    `).then(onResult);\n}\n\nfunction fetchStudents(id, onResult) {\n    graphql.query(`\n    {\n        inbound_program(id:${id}) {\n            id\n            inboundstudentprogram_set {\n                id\n                student {\n                    id\n                    id_number\n                    first_name\n                    middle_name\n                    family_name\n                }\n            }\n        }\n    }\n    `).then(onResult);\n}\n\nclass InboundPrograms extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            yearList : null,\n            programList : null,\n            activeYear : null,\n            activeTerm : 1,\n            activeProgram : null,\n            studentList : null,\n            sidebarContent : null,\n        };\n\n        this.setSidebarContent = this.setSidebarContent.bind(this);\n        this.refreshYears = this.refreshYears.bind(this);\n        this.setActiveYear = this.setActiveYear.bind(this);\n        this.setActiveTerm = this.setActiveTerm.bind(this);\n        this.programList = this.programList.bind(this);\n        this.setActiveProgram = this.setActiveProgram.bind(this);\n        this.studentList = this.studentList.bind(this);\n        this.refreshYears();\n    }\n\n    setSidebarContent(sidebarContent) {\n        this.setState({\n            sidebarContent : sidebarContent,\n        });\n    }\n\n    setActiveYear(year) {\n        this.setState({\n            activeYear : year.academic_year_start,\n            activeProgram : null,\n            studentList : null,\n        });\n\n        fetchPrograms(year.academic_year_start, this.state.activeTerm, result => {\n            this.setState({\n                programList : result.inbound_programs,\n            });\n        });\n\n        this.setSidebarContent(<AcademicYearSidebarPane academicYear={ year }/>);\n    }\n\n    setActiveTerm(term) {\n        this.setState({\n            activeTerm : term,\n            activeProgram : null,\n        });\n\n        fetchPrograms(this.state.activeYear, term, result => {\n            this.setState({\n                programList : result.inbound_programs,\n            });\n        });\n    }\n\n    setActiveProgram(program) {\n        this.setState({\n            activeProgram : program,\n        });\n\n        fetchStudents(program.id, result => {\n            this.setState({\n                studentList : result.inbound_program.inboundstudentprogram_set,\n            });\n        });\n\n        this.setSidebarContent(<ProgramsSidebarPane program={ program }/>);\n    }\n\n    refreshYears() {\n        fetchYears(result => {\n            this.setState({\n                yearList : result.academic_years,\n            });\n        });\n    }\n\n    programList() {\n        if (this.state.activeYear === null) {\n            return (\n                <div className=\"programs-page-pane\">\n                    <div className=\"loading-container\">\n                        <h4>Select an academic year to see its programs</h4>\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <ProgramList programList={ this.state.programList }\n                         activeYear={ this.state.activeYear }\n                         activeTerm={ this.state.activeTerm }\n                         setActiveTerm={ this.setActiveTerm }\n                         activeProgram={ this.state.activeProgram }\n                         setActiveProgram={ this.setActiveProgram }/>\n        );\n    }\n\n    studentList() {\n        if (this.state.activeProgram === null) {\n            return (\n                <div className=\"programs-page-pane\">\n                    <div className=\"loading-container\">\n                        <h4>Select a program to see its students</h4>\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <StudentList activeProgram={ this.state.activeProgram }\n                         students={ this.state.studentList }/>\n        );\n    }\n\n    render() {\n        return (\n            <div id=\"programs-page\"\n                 className=\"d-flex flex-row p-0 h-100\">\n                <YearList yearList={ this.state.yearList }\n                          setActiveYear={ this.setActiveYear }\n                          activeYear={ this.state.activeYear }/>\n\n                { this.programList() }\n                { this.studentList() }\n\n                <div className=\"programs-page-pane\">\n                    { this.state.sidebarContent }\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default InboundPrograms;"]}