{"version":3,"sources":["../../../../../js/tabs/Archives/tabs/sidebar_panes.js"],"names":["studentIsFetched","student","home_address","undefined","institutionIsFetched","institution","address","StudentSidebarPane","props","state","restoreStudentIsShowing","id","Object","assign","result","setState","toggleRestoreStudent","bind","fullName","first_name","middle_name","family_name","isFetched","pageBody","onRestoreSuccess","InstitutionSidebarPane","restoreInstitutionIsShowing","toggleRestoreInstitution","name"],"mappings":"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","file":"sidebar_panes.js","sourcesContent":["import React, { Component } from \"react\";\nimport LoadingSpinner from \"../../../components/loading\";\nimport {\n    RestoreInstitutionModal,\n    RestoreStudentModal,\n} from \"./modals\";\n\nimport {\n    ContactDetails as StudentContactDetails,\n    fetchStudent,\n    StudentDetails,\n    UniversityDetails,\n} from \"../../Students/tabs/overview\";\n\nimport {\n    StudentContact,\n    StudentDetailOverview,\n    StudentUniversity,\n} from \"../../Students/student_detail_overview\";\n\nimport {\n    ContactDetails as InstitutionContactDetails,\n    fetchInstitution,\n    InstitutionDetails,\n} from \"../../Institutions/tabs/overview\";\n\n\nfunction studentIsFetched(student) {\n    return student.home_address !== undefined;\n}\n\nfunction institutionIsFetched(institution) {\n    return institution.address !== undefined;\n}\n\nclass StudentSidebarPane extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            restoreStudentIsShowing : false,\n            student : props.student,\n        };\n\n        if (!studentIsFetched(props.student)) {\n            fetchStudent(props.student.id, result => {\n\n                //Copy results to existing student object so we won't have to fetch next time\n                Object.assign(props.student, result.student);\n                this.setState({\n                    student : result.student,\n                });\n            });\n        }\n\n        this.toggleRestoreStudent = this.toggleRestoreStudent.bind(this);\n    }\n\n    toggleRestoreStudent() {\n        this.setState({\n            restoreStudentIsShowing : !this.state.restoreStudentIsShowing,\n        });\n    }\n\n    componentWillReceiveProps(props) {\n        this.setState({\n            student : props.student,\n        });\n\n        if (!studentIsFetched(props.student)) {\n            fetchStudent(props.student.id, result => {\n\n                //Copy results to existing student object so we won't have to fetch next time\n                Object.assign(props.student, result.student);\n                this.setState({\n                    student : result.student,\n                });\n            });\n        }\n    }\n\n    render() {\n        const student = this.state.student;\n        const fullName = `${student.first_name} ${student.middle_name} ${student.family_name}`;\n        const isFetched = studentIsFetched(student);\n\n        let pageBody;\n\n        if (isFetched) {\n            pageBody = (\n                <div className=\"page-body\">\n                    <StudentDetails sidebar\n                                    archived\n                                    toggleRestoreStudent={this.toggleRestoreStudent}\n                                    student={student}/>\n                    <StudentContactDetails sidebar\n                                           student={student}/>\n                    <UniversityDetails sidebar\n                                       student={student}/>\n                    <RestoreStudentModal student={student}\n                                         toggle={this.toggleRestoreStudent}\n                                         onRestoreSuccess={this.props.onRestoreSuccess}\n                                         isOpen={this.state.restoreStudentIsShowing}/>\n                </div>\n            );\n        } else {\n            pageBody = <LoadingSpinner/>;\n        }\n\n        return (\n            <div className=\"p-0 h-100 d-flex flex-column\">\n                <div className=\"page-head pt-5 d-flex flex-row align-items-end\">\n                    <div className=\"mr-auto\">\n                        <h5 className=\"mb-0\">{fullName}</h5>\n                    </div>\n                </div>\n\n                {pageBody}\n            </div>\n        );\n    }\n}\n\nclass InstitutionSidebarPane extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            restoreInstitutionIsShowing : false,\n            institution : props.institution,\n        };\n\n        if (!institutionIsFetched(props.institution)) {\n            fetchInstitution(props.institution.id, result => {\n                const institution = result.institution;\n\n                //Copy results to existing institution object so we won't have to fetch next time\n                Object.assign(props.institution, institution);\n                this.setState({\n                    institution : institution,\n                });\n            });\n        }\n\n        this.toggleRestoreInstitution = this.toggleRestoreInstitution.bind(this);\n    }\n\n    componentWillReceiveProps(props) {\n        this.setState({\n            institution : props.institution,\n        });\n\n        if (!institutionIsFetched(props.institution)) {\n            fetchInstitution(props.institution.id, result => {\n                const institution = result.institution;\n\n                //Copy results to existing institution object so we won't have to fetch next time\n                Object.assign(props.institution, institution);\n                this.setState({\n                    institution : institution,\n                });\n            });\n        }\n    }\n\n    toggleRestoreInstitution() {\n        this.setState({\n            restoreInstitutionIsShowing : !this.state.restoreInstitutionIsShowing,\n        });\n    }\n\n    render() {\n        const institution = this.state.institution;\n        const isFetched = institutionIsFetched(institution);\n\n        let pageBody;\n\n        if (isFetched) {\n            pageBody = (\n                <div className=\"page-body\">\n                    <InstitutionDetails sidebar\n                                        archived\n                                        toggleRestoreInstitution={this.toggleRestoreInstitution}\n                                        institution={institution}/>\n                    <InstitutionContactDetails sidebar\n                                               institution={institution}/>\n                    <RestoreInstitutionModal institution={institution}\n                                             toggle={this.toggleRestoreInstitution}\n                                             onRestoreSuccess={this.props.onRestoreSuccess}\n                                             isOpen={this.state.restoreInstitutionIsShowing}/>\n                </div>\n            );\n        } else {\n            pageBody = <LoadingSpinner/>;\n        }\n\n        return (\n            <div className=\"p-0 h-100 d-flex flex-column\">\n                <div className=\"page-head pt-5 d-flex flex-row align-items-end\">\n                    <div className=\"mr-auto\">\n                        <h5 className=\"mb-0\">{institution.name}</h5>\n                    </div>\n                </div>\n\n                {pageBody}\n            </div>\n        );\n    }\n}\n\n\nexport {\n    StudentSidebarPane,\n    InstitutionSidebarPane,\n};"]}