{"version":3,"sources":["../../../../../js/tabs/Institutions/tabs/programs.js"],"names":["fetchPrograms","institutionID","onResponse","query","Programs","props","state","programList","institution","id","currentProgram","setCurrentProgram","bind","console","log","response","data","programs","setState","program","nextProps","ProgramsHead","name","ProgramsTable","ProgramsListSection","emptyState","length","rows","map","index","children"],"mappings":"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","file":"programs.js","sourcesContent":["import React, { Component } from \"react\";\nimport graphql from \"../../../graphql\";\nimport LoadingSpinner from \"../../../loading\";\nimport { Button } from \"reactstrap\";\nimport {\n    Section,\n    SectionRow,\n    SectionRowContent,\n    SectionTable,\n    SectionTitle,\n} from \"../../../components/section\";\n\nfunction fetchPrograms(institutionID, onResponse) {\n    graphql({\n        query : `\n        {\n            programs(institution:${institutionID}) {\n                name\n            }\n        }\n       `,\n        onResponse : onResponse,\n    });\n}\n\nclass Programs extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            programList : null,\n            institutionID : props.institution.id,\n            currentProgram : null,\n        };\n\n        this.setCurrentProgram = this.setCurrentProgram.bind(this);\n\n        fetchPrograms(props.institution.id, response => {\n            console.log(response.data.programs);\n            this.setState({\n                programList : response.data.programs,\n            });\n        });\n    }\n\n    setCurrentProgram(program) {\n        this.setState({\n            currentProgram : program,\n        });\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (this.state.institutionID === nextProps.institution.id) {\n            return;\n        }\n\n        this.setState({\n            institutionID : nextProps.institution.id,\n            programList : null,\n        });\n\n        fetchPrograms(nextProps.institution.id, response => {\n            console.log(response.data.programs);\n            this.setState({\n                programList : response.data.programs,\n            });\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"h-100 w-100\">\n                <ProgramsHead institution={ this.props.institution }/>\n                <ProgramsTable institution={ this.props.institution }\n                               programs={ this.state.programList }\n                               setCurrentProgram={ this.setCurrentProgram }/>\n            </div>\n        );\n    }\n}\n\nclass ProgramsHead extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    toggleAddPrograms() {\n        //TODO\n    }\n\n    render() {\n        return (\n            <div className=\"page-head pt-5 d-flex flex-row align-items-end\">\n                <div className=\"mr-auto\">\n                    <h5 className=\"mb-0 text-secondary\">Programs</h5>\n                    <h4 className=\"page-head-title mb-0\">{ this.props.institution.name }</h4>\n                </div>\n\n                <div className=\"page-head-actions\">\n                    <Button outline size=\"sm\" color=\"success\">\n                        Add a Program\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n}\n\nclass ProgramsTable extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className=\"w-100\">\n                <ProgramsListSection programs={ this.props.programs }/>\n            </div>\n        );\n    }\n}\n\nclass ProgramsListSection extends Component {\n    constructor(props) {\n        super(props);\n\n        this.emptyState = this.emptyState.bind(this);\n    }\n\n    emptyState() {\n        // TODO\n        return (\n            <div>\n                This is empty\n            </div>\n        );\n    }\n\n    render() {\n        if (this.props.programs === null) {\n            return <LoadingSpinner/>;\n        }\n\n        if (this.props.programs.length === 0) {\n            return this.emptyState();\n        }\n\n        let rows = this.props.programs.map((program, index) => {\n            //TODO: onClick\n            return (\n                <SectionRow key={ index }>\n                    <SectionRowContent large>{ program.name }</SectionRowContent>\n                </SectionRow>\n            );\n        });\n\n        return (\n            <div>\n                <Section>\n                    <SectionTitle>{ this.props.children }</SectionTitle>\n                    <SectionTable className=\"memorandums-accordion\">\n                        { rows }\n                    </SectionTable>\n                </Section>\n            </div>\n        );\n    }\n}\n\nexport default Programs;"]}