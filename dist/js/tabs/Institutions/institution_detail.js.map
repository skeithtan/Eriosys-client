{"version":3,"sources":["../../../../js/tabs/Institutions/institution_detail.js"],"names":["fetchInstitution","id","onResponse","query","InstitutionDetail","props","state","institution","institutionID","nextProps","setState","response","data","console","log","unselectedState","toggleDeleteInstitution","InstitutionDetailHead","name","country","InstitutionDetailBody"],"mappings":";;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;AAIA;;;;AACA;;;;;;;;;;;;AAGA,SAASA,gBAAT,CAA0BC,EAA1B,EAA8BC,UAA9B,EAA0C;AACtC,2BAAQ;AACJC,4DAEqBF,EAFrB,8SADI;AAiBJC,oBAAaA;AAjBT,KAAR;AAmBH;;IAEKE,iB;;;AACF,+BAAYC,KAAZ,EAAmB;AAAA;;AAAA,0IACTA,KADS;;AAEf,cAAKC,KAAL,GAAa;AACTC,yBAAc,IADL;AAETC,2BAAgB;AAFP,SAAb;AAFe;AAMlB;;;;kDAUyBC,S,EAAW;AAAA;;AACjC,gBAAMF,cAAcE,UAAUF,WAA9B;;AAEA,gBAAIA,gBAAgB,IAApB,EAA0B;AACtB,qBAAKG,QAAL,CAAc;AACVH,iCAAc,IADJ;AAEVC,mCAAgB;AAFN,iBAAd;;AAKA;AACH;;AAED;AACA,iBAAKE,QAAL,CAAc;AACVF,+BAAgBD,YAAYC;AADlB,aAAd;;AAIA;AACAR,6BAAiBS,UAAUF,WAAV,CAAsBN,EAAvC,EAA2C,oBAAY;AACnD,uBAAKS,QAAL,CAAc;AACVH,iCAAcI,SAASC,IAAT,CAAcL;AADlB,iBAAd;AAGH,aAJD;AAKH;;;iCAGQ;AACLM,oBAAQC,GAAR,CAAY,KAAKR,KAAjB;;AAEA;AACA,gBAAI,KAAKA,KAAL,CAAWE,aAAX,KAA6B,IAAjC,EAAuC;AACnC,uBAAOJ,kBAAkBW,eAAlB,EAAP;AACH;;AAED;AACA,gBAAI,KAAKT,KAAL,CAAWC,WAAX,KAA2B,IAA/B,EAAqC;AACjC,uBAAO,sDAAP;AACH;;AAED,mBACI;AAAA;AAAA,kBAAK,IAAG,oBAAR,EAA6B,WAAU,wCAAvC;AACI,8CAAC,qBAAD,IAAuB,aAAa,KAAKD,KAAL,CAAWC,WAA/C;AACuB,6CAAyB,KAAKF,KAAL,CAAWW,uBAD3D,GADJ;AAGI,8CAAC,qBAAD,IAAuB,aAAa,KAAKV,KAAL,CAAWC,WAA/C;AAHJ,aADJ;AAOH;;;0CAtDwB;AACrB,mBACI;AAAA;AAAA,kBAAK,WAAU,mBAAf;AACI;AAAA;AAAA;AAAA;AAAA;AADJ,aADJ;AAKH;;;;;;IAmDCU,qB;;;AACF,mCAAYZ,KAAZ,EAAmB;AAAA;;AAAA,6IACTA,KADS;AAElB;;;;iCAEQ;AACL,mBACI;AAAA;AAAA,kBAAK,WAAU,mDAAf;AACI;AAAA;AAAA,sBAAK,WAAU,SAAf;AACI;AAAA;AAAA,0BAAI,WAAU,+DAAd;AAA+E,6BAAKA,KAAL,CAAWE,WAAX,CAAuBW;AAAtG,qBADJ;AAEI;AAAA;AAAA,0BAAI,WAAU,mDAAd;AAAmE,6BAAKb,KAAL,CAAWE,WAAX,CAAuBY,OAAvB,CAA+BD;AAAlG;AAFJ,iBADJ;AAMI;AAAA;AAAA,sBAAK,IAAG,qBAAR;AACI;AAAA;AAAA,0BAAQ,aAAR,EAAgB,MAAK,IAArB,EAA0B,OAAM,SAAhC,EAA0C,WAAU,MAApD;AAAA;AAAA,qBADJ;AAEI;AAAA;AAAA,0BAAQ,aAAR,EAAgB,MAAK,IAArB,EAA0B,OAAM,QAAhC;AACQ,qCAAS,KAAKb,KAAL,CAAWW,uBAD5B;AAAA;AAAA;AAFJ;AANJ,aADJ;AAcH;;;;;;IAGCI,qB;;;AACF,mCAAYf,KAAZ,EAAmB;AAAA;;AAAA,6IACTA,KADS;AAElB;;;;iCAEQ;AACL,mBACI;AAAA;AAAA,kBAAK,WAAU,WAAf;AACI,wGAA2B,aAAa,KAAKA,KAAL,CAAWE,WAAnD,GADJ;AAEI,iGAAoB,aAAa,KAAKF,KAAL,CAAWE,WAA5C,GAFJ;AAGI;AAHJ,aADJ;AAOH;;;;;;kBAIUH,iB","file":"institution_detail.js","sourcesContent":["import React, { Component } from \"react\";\nimport { Button } from \"reactstrap\";\nimport LoadingSpinner from \"../../loading\";\nimport {\n    InstitutionDetailOverview,\n    InstitutionContact,\n} from \"./institution_detail_overview\";\nimport Memorandums from \"./memorandums\";\nimport graphql from \"../../graphql\";\n\n\nfunction fetchInstitution(id, onResponse) {\n    graphql({\n        query : `\n        {\n            institution(id:${id}) {\n                id\n                name\n                email\n                address\n                website\n                contactPersonName\n                contactPersonNumber\n                country {\n                    name\n                }\n            }\n        }\n       `,\n        onResponse : onResponse,\n    });\n}\n\nclass InstitutionDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            institution : null,\n            institutionID : null,\n        };\n    }\n\n    static unselectedState() {\n        return (\n            <div className=\"loading-container\">\n                <h3>Select an institution to see its details</h3>\n            </div>\n        );\n    }\n\n    componentWillReceiveProps(nextProps) {\n        const institution = nextProps.institution;\n\n        if (institution === null) {\n            this.setState({\n                institution : null,\n                institutionID : null,\n            });\n\n            return;\n        }\n\n        // Inform state about an active institution\n        this.setState({\n            institutionID : institution.institutionID,\n        });\n\n        //Fetch active institution details\n        fetchInstitution(nextProps.institution.id, response => {\n            this.setState({\n                institution : response.data.institution,\n            });\n        });\n    }\n\n\n    render() {\n        console.log(this.state);\n\n        //User has not selected yet, no activeInstitution ID\n        if (this.state.institutionID === null) {\n            return InstitutionDetail.unselectedState();\n        }\n\n        //User has already selected, but we haven't fetched it from the database yet\n        if (this.state.institution === null) {\n            return <LoadingSpinner/>;\n        }\n\n        return (\n            <div id=\"institution-detail\" className=\"container-fluid d-flex flex-column p-0\">\n                <InstitutionDetailHead institution={this.state.institution}\n                                       toggleDeleteInstitution={this.props.toggleDeleteInstitution}/>\n                <InstitutionDetailBody institution={this.state.institution}/>\n            </div>\n        );\n    }\n}\n\nclass InstitutionDetailHead extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className=\"page-head pt-5 d-flex flex-row align-items-center\">\n                <div className=\"mr-auto\">\n                    <h4 className=\"page-head-title justify-content-left d-inline-block mb-0 mr-2\">{this.props.institution.name}</h4>\n                    <h4 className=\"text-muted d-inline-block font-weight-normal mb-0\">{this.props.institution.country.name}</h4>\n                </div>\n\n                <div id=\"institution-actions\">\n                    <Button outline size=\"sm\" color=\"success\" className=\"mr-2\">Edit Institution</Button>\n                    <Button outline size=\"sm\" color=\"danger\"\n                            onClick={this.props.toggleDeleteInstitution}>Delete</Button>\n                </div>\n            </div>\n        );\n    }\n}\n\nclass InstitutionDetailBody extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className=\"page-body\">\n                <InstitutionDetailOverview institution={this.props.institution}/>\n                <InstitutionContact institution={this.props.institution}/>\n                <Memorandums/>\n            </div>\n        );\n    }\n}\n\n\nexport default InstitutionDetail;"]}