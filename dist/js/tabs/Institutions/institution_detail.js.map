{"version":3,"sources":["../../../../js/tabs/Institutions/institution_detail.js"],"names":["fetchInstitution","id","onResponse","query","InstitutionDetail","props","state","institution","institutionID","nextProps","setState","response","data","console","log","unselectedState","loadingState","InstitutionDetailHead","name","country","InstitutionDetailBody","InstitutionDetailOverview","email","address","website","contactPersonName","contactPersonNumber","InstitutionDetailRow","fieldName","fieldValue"],"mappings":"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","file":"institution_detail.js","sourcesContent":["import React, { Component } from \"react\";\nimport {\n    Button,\n    ListGroup,\n    ListGroupItem,\n} from \"reactstrap\";\nimport graphql from \"../../graphql\";\n\n\nfunction fetchInstitution(id, onResponse) {\n    graphql({\n        query : `\n        {\n            institution(id:${id}) {\n                id\n                name\n                email\n                address\n                website\n                contactPersonName\n                contactPersonNumber\n                country {\n                    name\n                }\n            }\n        }\n       `,\n        onResponse : onResponse,\n    });\n}\n\nclass InstitutionDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            institution : null,\n            institutionID : null,\n        };\n    }\n\n    static loadingState() {\n        return (\n            <div className=\"loading-container\">\n                <h3>Loading...</h3>\n            </div>\n        );\n    }\n\n    static unselectedState() {\n        return (\n            <div className=\"loading-container\">\n                <h3>Select an institution to see its details</h3>\n            </div>\n        );\n    }\n\n    componentWillReceiveProps(nextProps) {\n        const institution = nextProps.institution;\n        if (institution !== null) {\n            fetchInstitution(nextProps.institution.id, response => {\n                this.setState({\n                    institution : response.data.institution,\n                    institutionID : response.data.institutionID,\n                });\n            });\n        }\n    }\n\n\n    render() {\n        console.log(this.state);\n        if (this.state.institutionID === null) {\n            return InstitutionDetail.unselectedState();\n        }\n\n        if (this.state.institution === null) {\n            return InstitutionDetail.loadingState();\n        }\n\n        return (\n            <div id=\"institution-detail\" className=\"container-fluid d-flex flex-column p-0\">\n                <InstitutionDetailHead institution={this.state.institution}/>\n                <InstitutionDetailBody institution={this.state.institution}/>\n            </div>\n        );\n    }\n}\n\nclass InstitutionDetailHead extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className=\"page-head pt-5 d-flex flex-row align-items-center\">\n                <div className=\"mr-auto\">\n                    <h4 className=\"page-head-title justify-content-left d-inline-block mb-0 mr-2\">{this.props.institution.name}</h4>\n                    <h4 className=\"text-muted d-inline-block font-weight-normal mb-0\">{this.props.institution.country.name}</h4>\n                </div>\n\n                <div>\n                    <Button outline size=\"sm\" color=\"success\" className=\"mr-2\">Edit Institution</Button>\n                    <Button outline size=\"sm\" color=\"danger\">Delete</Button>\n                </div>\n            </div>\n        );\n    }\n}\n\nclass InstitutionDetailBody extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className=\"page-body\">\n                <InstitutionDetailOverview institution={this.props.institution}/>\n            </div>\n        );\n    }\n}\n\nclass InstitutionDetailOverview extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const institution = this.props.institution;\n\n        return (\n            <div>\n                <small className=\"section-title\">Institution details</small>\n                <ListGroup>\n                    <InstitutionDetailRow fieldName=\"Email\" fieldValue={institution.email}/>\n                    <InstitutionDetailRow fieldName=\"Address\" fieldValue={institution.address}/>\n                    <InstitutionDetailRow fieldName=\"Website\" fieldValue={institution.website}/>\n                    <InstitutionDetailRow fieldName=\"Contact Person\" fieldValue={institution.contactPersonName}/>\n                    <InstitutionDetailRow fieldName=\"Contact Person Number\"\n                                          fieldValue={institution.contactPersonNumber}/>\n                </ListGroup>\n            </div>\n        );\n    }\n}\n\nclass InstitutionDetailRow extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <ListGroupItem>\n                <small className=\"font-weight-bold\">{this.props.fieldName}</small>\n                <p className=\"m-0\">{this.props.fieldValue}</p>\n            </ListGroupItem>\n        );\n    }\n}\n\nexport default InstitutionDetail;"]}