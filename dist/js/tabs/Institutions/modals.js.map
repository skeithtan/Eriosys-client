{"version":3,"sources":["../../../../js/tabs/Institutions/modals.js"],"names":["InstitutionFormModal","props","state","form","name","country","address","website","contact_person_email","contact_person_name","contact_person_number","agreement","getFormErrors","bind","getChangeHandler","submitAddInstitutionForm","submitEditInstitutionForm","edit","Object","assign","institution","characterLimit","value","customValidators","isValid","fieldValue","length","test","errorMessage","fieldName","dismissToast","title","message","post","url","serverURL","data","beforeSend","success","refresh","onAddInstitution","error","console","log","response","toggle","ajax","method","id","done","fail","event","target","setState","formHasErrors","fieldErrors","countries","map","index","unshift","fieldError","isOpen","ArchiveInstitutionModal","confirmArchive","icon","progressBar","MemorandumFormModal","setupUploadCare","submitAddMemorandumForm","submitEditMemorandumForm","memorandumToggle","componentWillReceiveProps","newProps","category","memorandum_file","date_effective","date_expiration","college_initiator","linkages","memorandum","undefined","widget","uploadcare","SingleWidget","setMemorandumFile","link","onChange","file","info","cdnUrl","memorandumToBeAdded","toggleMemorandumToBeAdded","JSON","stringify","contentType","onEditSuccess","entries","linkageCode","linkage","linkageString","isSelected","includes","className","onClick","splice","indexOf","push","collegeInitiators","colleges","college","uploadcarePublicKey","ArchiveMemorandumModal","onDeleteSuccess","ProgramFormModal","academic_year","terms_available","is_graduate","requirement_deadline","academic_years","step","overviewForm","requirementForm","onTermClick","getOverviewFormErrors","getRequirementFormErrors","submitAddProgramForm","result","academicYear","academic_year_start","toString","term","isGraduate","termButtons","academicYears","setIsGraduate","formBody","shouldShowFormFooter","noAcademicYearsState","ProgramFormRequirements","requirements","handleAddRequirement","handleRemoveRequirement","handleRequirementChange","newValue","requirement","candidateIndex","concat","filter","ProgramFormRequirementRow","onValueChange","validateInput","hasRemoveButton","onRemoveButtonClick","isLastItem","onAddButtonClick"],"mappings":"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","file":"modals.js","sourcesContent":["import React, { Component } from \"react\";\nimport authorizeXHR from \"../../authorization\";\nimport { makeInfoToast } from \"../../dismissable_toast_maker\";\nimport validateForm from \"../../form_validator\";\nimport settings from \"../../settings\";\nimport iziToast from \"izitoast\";\nimport $ from \"jquery\";\n\nimport {\n    Modal,\n    ModalHeader,\n    ModalBody,\n    ModalFooter,\n    Form,\n    FormGroup,\n    Label,\n    Input,\n    Button,\n    InputGroup,\n    InputGroupAddon,\n    FormFeedback,\n    ListGroup,\n    ListGroupItem,\n    ButtonGroup,\n} from \"reactstrap\";\nimport { fetchYears } from \"../OutboundPrograms/outbound_programs\";\nimport LoadingSpinner from \"../../components/loading\";\n\n\nclass InstitutionFormModal extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            form : {\n                name : \"\",\n                country : \"\",\n                address : \"\",\n                website : \"\",\n                contact_person_email : \"\",\n                contact_person_name : \"\",\n                contact_person_number : \"\",\n                agreement : \"B\",\n            },\n        };\n\n        this.getFormErrors = this.getFormErrors.bind(this);\n        this.getChangeHandler = this.getChangeHandler.bind(this);\n\n        this.submitAddInstitutionForm = this.submitAddInstitutionForm.bind(this);\n        this.submitEditInstitutionForm = this.submitEditInstitutionForm.bind(this);\n\n        if (this.props.edit) {\n            // Copy the object, do not equate, otherwise the object changes along with the form.\n            Object.assign(this.state.form, props.institution);\n        }\n    }\n\n    getFormErrors() {\n        return validateForm([\n            {\n                name : \"Name\",\n                characterLimit : 64,\n                value : this.state.form.name,\n            },\n            {\n                name : \"Country\",\n                value : this.state.form.country,\n            },\n            {\n                name : \"Address\",\n                characterLimit : 256,\n                value : this.state.form.address,\n            },\n            {\n                name : \"Website\",\n                characterLimit : 256,\n                value : this.state.form.website,\n            },\n            {\n                name : \"Contact person name\",\n                characterLimit : 256,\n                value : this.state.form.contact_person_name,\n            },\n            {\n                name : \"Contact person number\",\n                characterLimit : 64,\n                value : this.state.form.contact_person_number,\n            },\n            {\n                name : \"Contact person email\",\n                characterLimit : 256,\n                value : this.state.form.contact_person_email,\n                customValidators : [{\n                    // isValid checks if the form value is a valid email through this messy regex.\n                    // It also lets blank values pass because it's an optional field\n                    isValid : fieldValue => fieldValue.length === 0 || /^([\\w\\!\\#$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`{\\|\\}\\~]+\\.)*[\\w\\!\\#$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`{\\|\\}\\~]+@((((([a-z0-9]{1}[a-z0-9\\-]{0,62}[a-z0-9]{1})|[a-z])\\.)+[a-z]{2,6})|(\\d{1,3}\\.){3}\\d{1,3}(\\:\\d{1,5})?)$/i.test(fieldValue),\n                    errorMessage : fieldName => `${fieldName} must be a valid email.`,\n                }],\n            },\n        ]);\n    }\n\n    submitAddInstitutionForm() {\n        const dismissToast = makeInfoToast({\n            title : \"Adding\",\n            message : \"Adding new institution...\",\n        });\n        $.post({\n            url : `${settings.serverURL}/institutions/`,\n            data : this.state.form,\n            beforeSend : authorizeXHR,\n            success : institution => {\n                dismissToast();\n                this.props.refresh();\n                this.props.onAddInstitution(institution);\n                iziToast.success({\n                    title : \"Success\",\n                    message : `Successfully added institution ${this.state.form.name}.`,\n                });\n            },\n            error : response => {\n                dismissToast();\n                console.log(response);\n                iziToast.error({\n                    title : \"Error\",\n                    message : \"Unable to add institution\",\n                });\n            },\n        });\n\n        this.props.toggle();\n    }\n\n    submitEditInstitutionForm() {\n        const dismissToast = makeInfoToast({\n            title : \"Editing\",\n            message : \"Editing institution...\",\n        });\n\n        $.ajax({\n            method : \"PUT\",\n            url : `${settings.serverURL}/institutions/${this.state.form.id}/`,\n            data : this.state.form,\n            beforeSend : authorizeXHR,\n        }).done(() => {\n            dismissToast();\n            this.props.refresh();\n            iziToast.success({\n                title : \"Success\",\n                message : \"Successfully modified institution\",\n            });\n        }).fail(response => {\n            dismissToast();\n            console.log(response);\n            iziToast.error({\n                title : \"Error\",\n                message : \"Unable to edit institution\",\n            });\n        });\n\n        this.props.toggle();\n    }\n\n    getChangeHandler(fieldName) {\n        const form = this.state.form;\n\n        return event => {\n            const value = event.target.value;\n\n            form[fieldName] = value;\n            this.setState({\n                form : form,\n            });\n        };\n    }\n\n    render() {\n        const { formHasErrors, fieldErrors } = this.getFormErrors();\n\n        const countries = settings.countries.map((name, index) =>\n            <option key={index}>{name}</option>,\n        );\n\n        countries.unshift(<option key=\"X\"\n                                  value=\"\">Select a country</option>);\n\n        function isValid(fieldName) {\n            return fieldErrors[fieldName].length === 0;\n        }\n\n        function fieldError(fieldName) {\n            return fieldErrors[fieldName][0];\n        }\n\n        return (\n            <Modal isOpen={this.props.isOpen}\n                   toggle={this.props.toggle}\n                   backdrop={true}>\n                <ModalHeader toggle={this.props.toggle}>\n                    {this.props.edit ? `Edit ${this.state.form.name}` : \"Add an Institution\"}\n                </ModalHeader>\n                <ModalBody className=\"form\">\n                    <Form>\n\n                        <h5 className=\"mb-3\">Institution Details</h5>\n                        <FormGroup>\n                            <Label>Name</Label>\n                            <Input placeholder=\"Institution Name\"\n                                   onChange={this.getChangeHandler(\"name\")}\n                                   valid={isValid(\"Name\")}\n                                   defaultValue={this.state.form.name}/>\n                            <FormFeedback>{fieldError(\"Name\")}</FormFeedback>\n                        </FormGroup>\n\n                        <FormGroup>\n                            <Label>Country</Label>\n                            <Input type=\"select\"\n                                   onChange={this.getChangeHandler(\"country\")}\n                                   valid={isValid(\"Country\")}\n                                   defaultValue={this.state.form.country}>\n                                {countries}\n                            </Input>\n                            <FormFeedback>{fieldError(\"Country\")}</FormFeedback>\n                        </FormGroup>\n\n                        <FormGroup>\n                            <Label>Address</Label>\n                            <Input type=\"textarea\"\n                                   placeholder=\"Address\"\n                                   onChange={this.getChangeHandler(\"address\")}\n                                   valid={isValid(\"Address\")}\n                                   defaultValue={this.state.form.address}/>\n                            <FormFeedback>{fieldError(\"Address\")}</FormFeedback>\n                        </FormGroup>\n\n                        <FormGroup>\n                            <Label>Website</Label>\n                            <InputGroup>\n                                <InputGroupAddon>http://</InputGroupAddon>\n                                <Input placeholder=\"Website\"\n                                       onChange={this.getChangeHandler(\"website\")}\n                                       valid={isValid(\"Website\")}\n                                       defaultValue={this.state.form.website}/>\n                            </InputGroup>\n                            <Input type=\"hidden\"\n                                   value={this.state.form.website}\n                                   valid={isValid(\"Website\")}/>\n                            <FormFeedback><p>{fieldError(\"Website\")}</p></FormFeedback>\n                        </FormGroup>\n\n                        <FormGroup>\n                            <Label>Agreement Type</Label>\n                            <Input type=\"select\"\n                                   onChange={this.getChangeHandler(\"agreement\")}\n                                   defaultValue={this.state.form.agreement}>\n                                <option value=\"B\">Bilateral</option>\n                                <option value=\"M\">Multilateral</option>\n                            </Input>\n                        </FormGroup>\n\n                        <br/>\n\n                        <h5 className=\"mb-3\">Contact</h5>\n\n                        <FormGroup>\n                            <Label>Contact Person</Label>\n                            <Input placeholder=\"Name\"\n                                   onChange={this.getChangeHandler(\"contact_person_name\")}\n                                   valid={isValid(\"Contact person name\")}\n                                   defaultValue={this.state.form.contact_person_name}/>\n                            <FormFeedback>{fieldError(\"Contact person name\")}</FormFeedback>\n                        </FormGroup>\n\n                        <FormGroup>\n                            <Label>Contact Email</Label>\n                            <Input type=\"email\"\n                                   placeholder=\"Email\"\n                                   onChange={this.getChangeHandler(\"contact_person_email\")}\n                                   valid={isValid(\"Contact person email\")}\n                                   defaultValue={this.state.form.contact_person_email}/>\n                            <FormFeedback>{fieldError(\"Contact person email\")}</FormFeedback>\n                        </FormGroup>\n\n                        <FormGroup>\n                            <Label>Contact Number</Label>\n                            <Input placeholder=\"Number\"\n                                   onChange={this.getChangeHandler(\"contact_person_number\")}\n                                   valid={isValid(\"Contact person number\")}\n                                   defaultValue={this.state.form.contact_person_number}/>\n                            <FormFeedback>{fieldError(\"Contact person number\")}</FormFeedback>\n                        </FormGroup>\n\n                    </Form>\n                </ModalBody>\n                <ModalFooter>\n                    <Button outline\n                            color=\"success\"\n                            onClick={this.props.edit ? this.submitEditInstitutionForm : this.submitAddInstitutionForm}\n                            disabled={formHasErrors}>\n                        {this.props.edit ? \"Save changes\" : \"Add\"}\n                    </Button>\n                </ModalFooter>\n            </Modal>\n        );\n    }\n}\n\nclass ArchiveInstitutionModal extends Component {\n    constructor(props) {\n        super(props);\n        this.confirmArchive = this.confirmArchive.bind(this);\n    }\n\n    confirmArchive() {\n        const dismissToast = makeInfoToast({\n            title : \"Deleting\",\n            message : \"Deleting institution...\",\n        });\n\n        $.ajax({\n            url : `${settings.serverURL}/institutions/${this.props.institution.id}/`,\n            method : \"DELETE\",\n            beforeSend : authorizeXHR,\n            success : () => {\n                dismissToast();\n                this.props.refresh();\n                iziToast.success({\n                    icon : \"\",\n                    title : \"Success\",\n                    message : \"Institution archived\",\n                    progressBar : false,\n                });\n            },\n            error : response => {\n                dismissToast();\n                console.log(response);\n                iziToast.error({\n                    title : \"Error\",\n                    message : \"Unable to archive institution\",\n                    progressBar : false,\n                });\n            },\n        });\n        this.props.toggle();\n    }\n\n    render() {\n        return (\n            <Modal isOpen={this.props.isOpen}\n                   toggle={this.props.toggle}\n                   backdrop={true}\n                   id=\"archive-institution-modal\">\n                <ModalHeader className=\"text-yellow\">\n                    Are you sure you want to archive {this.props.institution.name}?\n                </ModalHeader>\n                <ModalFooter>\n                    <Button outline\n                            color=\"warning\"\n                            onClick={this.confirmArchive}>Confirm Archive</Button>\n                </ModalFooter>\n            </Modal>\n        );\n    }\n}\n\nclass MemorandumFormModal extends Component {\n    constructor(props) {\n        super(props);\n        this.getFormErrors = this.getFormErrors.bind(this);\n        this.setupUploadCare = this.setupUploadCare.bind(this);\n        this.getChangeHandler = this.getChangeHandler.bind(this);\n        this.submitAddMemorandumForm = this.submitAddMemorandumForm.bind(this);\n        this.submitEditMemorandumForm = this.submitEditMemorandumForm.bind(this);\n        this.memorandumToggle = this.memorandumToggle.bind(this);\n\n        this.componentWillReceiveProps(props);\n    }\n\n    componentWillReceiveProps(newProps) {\n        this.state = {\n            form : {\n                category : \"MOA\",\n                memorandum_file : \"\",\n                date_effective : \"\",\n                date_expiration : \"\",\n                college_initiator : \"\",\n                linkages : [],\n            },\n        };\n\n        if (newProps.memorandum !== undefined) {\n            Object.assign(this.state.form, newProps.memorandum);\n            this.state.form.category = newProps.memorandum.category === \"Agreement\" ? \"MOA\" : \"MOU\";\n            this.state.form.linkages = []; //Do not use prop linkage = make a new one.\n\n            Object.assign(this.state.form.linkages, newProps.memorandum.linkages);\n        }\n    }\n\n    getFormErrors() {\n        return validateForm([\n            {\n                name : \"Date effective\",\n                characterLimit : null,\n                value : this.state.form.date_effective,\n            },\n            {\n                name : \"File\",\n                characterLimit : null,\n                value : this.state.form.memorandum_file,\n            },\n        ]);\n    }\n\n    getChangeHandler(fieldName) {\n        const form = this.state.form;\n\n        return event => {\n            const value = event.target.value;\n\n            form[fieldName] = value;\n            this.setState({\n                form : form,\n            });\n\n        };\n\n    }\n\n    setupUploadCare() {\n        const widget = uploadcare.SingleWidget(\"[role=uploadcare-uploader]\");\n        const form = this.state.form;\n        const setMemorandumFile = link => {\n            form.memorandum_file = link;\n            this.setState({\n                form : form,\n            });\n        };\n\n        widget.onChange(file => {\n            if (file) {\n                file.done(info => {\n                    setMemorandumFile(info.cdnUrl);\n                });\n            }\n        });\n    }\n\n    submitAddMemorandumForm() {\n        const dismissToast = makeInfoToast({\n            title : \"Adding\",\n            message : \"Adding new memorandum...\",\n        });\n\n        $.post({\n            url : `${settings.serverURL}/institutions/${this.props.institution.id}/memorandums/`,\n            data : this.state.form,\n            beforeSend : authorizeXHR,\n            success : () => {\n                dismissToast();\n                this.props.refresh();\n                if (this.props.memorandumToBeAdded) {\n                    this.props.toggleMemorandumToBeAdded();\n                }\n                iziToast.success({\n                    title : \"Success\",\n                    message : \"Successfully added memorandum\",\n                });\n            },\n            error : response => {\n                dismissToast();\n                console.log(response);\n                iziToast.error({\n                    title : \"Error\",\n                    message : \"Unable to add memorandum\",\n                });\n            },\n        });\n\n        this.props.toggle();\n    }\n\n    submitEditMemorandumForm() {\n        const dismissToast = makeInfoToast({\n            title : \"Editing\",\n            message : \"Editing memorandum...\",\n        });\n\n        if (this.state.form.college_initiator === \"\") {\n            this.state.form.college_initiator = null;\n        }\n\n        $.ajax({\n            method : \"PUT\",\n            url : `${settings.serverURL}/memorandums/${this.state.form.id}/`,\n            // The array requires this to be JSON.\n            data : JSON.stringify(this.state.form),\n            contentType : \"application/json\",\n            beforeSend : authorizeXHR,\n            success : (response) => {\n                dismissToast();\n                const memorandum = response;\n                this.props.onEditSuccess(memorandum);\n                this.props.refresh();\n\n                iziToast.success({\n                    title : \"Success\",\n                    message : \"Successfully modified memorandum\",\n                });\n            },\n            error : response => {\n                dismissToast();\n                console.log(response);\n                iziToast.error({\n                    title : \"Error\",\n                    message : \"Unable to edit memorandum\",\n                });\n            },\n        });\n\n        this.props.toggle();\n    }\n\n    memorandumToggle() {\n        this.props.toggle();\n        if (this.props.memorandumToBeAdded) {\n            this.props.toggleMemorandumToBeAdded();\n        }\n    }\n\n    render() {\n        const { formHasErrors, fieldErrors } = this.getFormErrors();\n\n        const linkages = Object.entries(settings.linkages).map(linkage => {\n            const linkageCode = linkage[0];\n            const linkageString = linkage[1];\n\n            const isSelected = this.state.form.linkages.includes(linkageCode);\n            const className = isSelected ? \"bg-dlsu-lighter text-white d-flex\" : \"d-flex\";\n\n            const onClick = () => {\n                const form = this.state.form;\n\n                if (isSelected) {\n                    const linkages = form.linkages;\n                    // Remove from linkages the selected linkage\n                    linkages.splice(linkages.indexOf(linkageCode), 1);\n                } else {\n                    form.linkages.push(linkageCode);\n                }\n\n                this.setState({\n                    form : form,\n                });\n            };\n\n\n            return <ListGroupItem key={linkageCode}\n                                  onClick={onClick}\n                                  className={className}>\n                <span className=\"mr-auto\">{linkageString}</span>\n                {isSelected && <h5 className=\"mb-0\">✓</h5>}\n            </ListGroupItem>;\n        });\n\n        let collegeInitiators = Object.entries(settings.colleges).map(college => {\n            return <option key={college[0]}\n                           value={college[0]}>{college[1]}</option>;\n        });\n\n        collegeInitiators.unshift(\n            <option key=\"null\"\n                    value={\"\"}>No college initiator</option>,\n        );\n\n        function isValid(fieldName) {\n            return fieldErrors[fieldName].length === 0;\n        }\n\n        function fieldError(fieldName) {\n            return fieldErrors[fieldName][0];\n        }\n\n        return (\n            <Modal isOpen={this.props.isOpen}\n                   toggle={this.memorandumToggle}\n                   backdrop={true}\n                   onOpened={this.setupUploadCare}>\n                <ModalHeader toggle={this.memorandumToggle}>\n                    {this.props.edit ? \"Edit memorandum\" : `Add a memorandum to ${this.props.institution.name}`}\n                </ModalHeader>\n                <ModalBody className=\"form\">\n                    <Form>\n                        <h5>Memorandum details</h5>\n                        <FormGroup>\n                            <Label>Category</Label>\n                            <Input type=\"select\"\n                                   defaultValue={this.state.form.category}\n                                   onChange={this.getChangeHandler(\"category\")}>\n                                <option value=\"MOA\">Memorandum of Agreement</option>\n                                <option value=\"MOU\">Memorandum of Understanding</option>\n                            </Input>\n                        </FormGroup>\n                        <FormGroup>\n                            <Label>File Link</Label>\n                            <Input type=\"hidden\"\n                                   role=\"uploadcare-uploader\"\n                                   name=\"content\"\n                                   data-public-key={settings.uploadcarePublicKey}\n                                   valid={isValid(\"File\")}/>\n                            <FormFeedback>{fieldError(\"File\")}</FormFeedback>\n                            {this.props.edit &&\n                            <small className=\"text-secondary\">To change memorandum file, upload a new file. Otherwise,\n                                leave this blank.</small>\n                            }\n                        </FormGroup>\n                        <FormGroup>\n                            <Label>Date Effective</Label>\n                            <Input type=\"date\"\n                                   defaultValue={this.state.form.date_effective}\n                                   onChange={this.getChangeHandler(\"date_effective\")}\n                                   valid={isValid(\"Date effective\")}/>\n                            <FormFeedback>{fieldError(\"Date effective\")}</FormFeedback>\n                        </FormGroup>\n                        <FormGroup>\n                            <Label>Expiration Date</Label>\n                            <Input type=\"date\"\n                                   defaultValue={this.state.form.date_expiration}\n                                   onChange={this.getChangeHandler(\"date_expiration\")}/>\n                            <small className=\"text-secondary\">If the memorandum has no expiration date, leave this\n                                blank.\n                            </small>\n                        </FormGroup>\n                        <FormGroup>\n                            <Label>College Initiator</Label>\n                            <Input type=\"select\"\n                                   defaultValue={this.state.form.college_initiator}\n                                   onChange={this.getChangeHandler(\"college_initiator\")}>\n                                {collegeInitiators}\n                            </Input>\n                        </FormGroup>\n                        <br/>\n                        <h5>Linkages</h5>\n                        <small className=\"text-secondary mb-3 d-block\">Select all linkages that apply to this\n                            memorandum.\n                        </small>\n                        <ListGroup>\n                            {linkages}\n                        </ListGroup>\n                    </Form>\n                </ModalBody>\n                <ModalFooter>\n                    <Button outline\n                            color=\"success\"\n                            disabled={formHasErrors}\n                            onClick={this.props.edit ? this.submitEditMemorandumForm : this.submitAddMemorandumForm}>\n                        {this.props.edit ? \"Save changes\" : \"Add\"}\n                    </Button>\n                </ModalFooter>\n            </Modal>\n        );\n    }\n\n}\n\nclass ArchiveMemorandumModal extends Component {\n    constructor(props) {\n        super(props);\n\n        this.confirmArchive = this.confirmArchive.bind(this);\n    }\n\n    confirmArchive() {\n        const dismissToast = makeInfoToast({\n            title : \"Archiving\",\n            message : \"Archiving memorandum...\",\n        });\n\n        $.ajax({\n            url : `${settings.serverURL}/memorandums/${this.props.memorandum.id}`,\n            method : \"DELETE\",\n            beforeSend : authorizeXHR,\n            success : () => {\n                dismissToast();\n                this.props.onDeleteSuccess();\n                this.props.refresh();\n                iziToast.success({\n                    title : \"Success\",\n                    message : \"Memorandum archived\",\n                    progressBar : false,\n                });\n            },\n            error : response => {\n                dismissToast();\n                console.log(response);\n                iziToast.error({\n                    title : \"Error\",\n                    message : \"Unable to archive memorandum\",\n                    progressBar : false,\n                });\n            },\n        });\n        this.props.toggle();\n    }\n\n    render() {\n        return (\n            <Modal isOpen={this.props.isOpen}\n                   toggle={this.props.toggle}\n                   backdrop={true}\n                   id=\"archive-memorandum-modal\">\n                <ModalHeader toggle={this.props.toggle}\n                             className=\"text-yellow\">Are you sure you want to archive this memorandum?</ModalHeader>\n                <ModalFooter>\n                    <Button outline\n                            color=\"warning\"\n                            id=\"archive-memorandum-modal-submit\"\n                            onClick={this.confirmArchive}>Archive</Button>\n                </ModalFooter>\n            </Modal>\n        );\n    }\n}\n\nclass ProgramFormModal extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            form : {\n                institution : this.props.institution,\n                name : \"\",\n                linkage : \"SE\",\n                academic_year : \"\",\n                terms_available : [],\n                is_graduate : false,\n                requirement_deadline : \"\",\n            },\n            academic_years : null,\n            step : \"Overview\",\n        };\n\n        this.overviewForm = this.overviewForm.bind(this);\n        this.requirementForm = this.requirementForm.bind(this);\n        this.onTermClick = this.onTermClick.bind(this);\n        this.getOverviewFormErrors = this.getOverviewFormErrors.bind(this);\n        this.getRequirementFormErrors = this.getRequirementFormErrors.bind(this);\n        this.submitAddProgramForm = this.submitAddProgramForm.bind(this);\n        this.getChangeHandler = this.getChangeHandler.bind(this);\n\n        fetchYears(result => {\n            this.setState({\n                academic_years : result.academic_years.map(academicYear => academicYear.academic_year_start),\n            });\n        });\n    }\n\n    getOverviewFormErrors() {\n\n        return validateForm([\n            {\n                name : \"Program name\",\n                characterLimit : 64,\n                value : this.state.form.name,\n            },\n            {\n                name : \"Academic year\",\n                characterLimit : null,\n                value : this.state.form.academic_year,\n            },\n            {\n                name : \"Terms available\",\n                characterLimit : null,\n                value : this.state.form.terms_available.toString(),\n                customValidators : [{\n                    isValid : fieldValue => [1, 3].toString() !== fieldValue,\n                    errorMessage : fieldName => `${fieldName} must be consecutive`,\n                }],\n            },\n        ]);\n    }\n\n    getRequirementFormErrors() {\n        return validateForm([\n            {\n                name : \"Requirements deadline\",\n                characterLimit : null,\n                value : this.state.form.requirement_deadline,\n            },\n        ]);\n    }\n\n    submitAddProgramForm() {\n        const dismissToast = makeInfoToast({\n            title : \"Adding\",\n            message : \"Adding program...\",\n        });\n\n        $.post({\n            url : `${settings.serverURL}/programs/outbound/`,\n            data : JSON.stringify(this.state.form),\n            contentType : \"application/json\",\n            beforeSend : authorizeXHR,\n        }).done(() => {\n            dismissToast();\n            this.props.refresh();\n            iziToast.success({\n                title : \"Success\",\n                message : \"Successfully added memorandum\",\n            });\n        }).fail(response => {\n            dismissToast();\n            console.log(response);\n            iziToast.error({\n                title : \"Error\",\n                message : \"Unable to add memorandum\",\n            });\n        });\n\n        this.props.toggle();\n    }\n\n    getChangeHandler(fieldName) {\n        const form = this.state.form;\n\n        return event => {\n            const value = event.target.value;\n\n            form[fieldName] = value;\n            this.setState({\n                form : form,\n            });\n        };\n    }\n\n    onTermClick(term) {\n        const index = this.state.form.terms_available.indexOf(term);\n        if (index < 0) {\n            this.state.form.terms_available.push(term);\n        } else {\n            this.state.form.terms_available.splice(index, 1);\n        }\n\n        this.setState({\n            form : this.state.form,\n        });\n    }\n\n    setIsGraduate(isGraduate) {\n        this.state.form.is_graduate = isGraduate;\n        this.setState({\n            form : this.state.form,\n        });\n    }\n\n    static noAcademicYearsState() {\n        return (\n            <div className=\"loading-container p-5\">\n                <h4>There are no academic years yet.</h4>\n                <p>Define the academic years in the outbound programs tab.</p>\n            </div>\n        );\n    }\n\n    overviewForm(fieldErrors) {\n\n        function isValid(fieldName) {\n            return fieldErrors[fieldName].length === 0;\n        }\n\n        function fieldError(fieldName) {\n            return fieldErrors[fieldName][0];\n        }\n\n        const termButtons = [1, 2, 3].map(term =>\n            <Button outline\n                    color=\"success\"\n                    key={term}\n                    onClick={() => this.onTermClick(term)}\n                    active={this.state.form.terms_available.includes(term)}>\n                {term}\n            </Button>,\n        );\n\n        const academicYears = this.state.academic_years.map(academicYear =>\n            <option key={academicYear}\n                    onClick={this.getChangeHandler(\"academic_year\")}\n                    value={academicYear}>{`${academicYear} - ${academicYear + 1}`}</option>,\n        );\n\n        academicYears.unshift(\n            <option key={0}\n                    onClick={this.getChangeHandler(\"academic_year\")}\n                    value={\"\"}>Select an academic year</option>,\n        );\n\n        return (\n            <ModalBody className=\"form\">\n                <Form>\n                    <FormGroup>\n                        <Label>Program Name</Label>\n                        <Input placeholder=\"Program Name\"\n                               onChange={this.getChangeHandler(\"name\")}\n                               valid={isValid(\"Program name\")}\n                               defaultValue={this.state.form.name}/>\n                        <FormFeedback>{fieldError(\"Program name\")}</FormFeedback>\n                    </FormGroup>\n\n                    <FormGroup>\n                        <div className=\"d-block w-100\">\n                            <ButtonGroup>\n                                <Button outline\n                                        color=\"success\"\n                                        onClick={() => this.setIsGraduate(false)}\n                                        active={!this.state.form.is_graduate}>\n                                    Undergraduate program\n                                </Button>\n                                <Button outline\n                                        color=\"success\"\n                                        onClick={() => this.setIsGraduate(true)}\n                                        active={this.state.form.is_graduate}>\n                                    Graduate program\n                                </Button>\n                            </ButtonGroup>\n                        </div>\n                    </FormGroup>\n\n                    <FormGroup>\n                        <Label>Academic Years</Label>\n                        <Input type=\"select\"\n                               onChange={this.getChangeHandler(\"academic_year\")}\n                               valid={isValid(\"Academic year\")}\n                               defaultValue={this.state.form.academic_year}>\n                            {academicYears}\n                        </Input>\n                        <FormFeedback>{fieldError(\"Academic year\")}</FormFeedback>\n                    </FormGroup>\n\n                    <FormGroup>\n                        <Label>Terms Available</Label>\n                        <div className=\"d-block w-100\">\n                            <ButtonGroup>\n                                {termButtons}\n                            </ButtonGroup>\n                        </div>\n                        <div className=\"invalid-feedback d-block\">{fieldError(\"Terms available\")}</div>\n                    </FormGroup>\n\n                </Form>\n            </ModalBody>\n        );\n    }\n\n    requirementForm(fieldErrors) {\n        function isValid(fieldName) {\n            return fieldErrors[fieldName].length === 0;\n        }\n\n        function fieldError(fieldName) {\n            return fieldErrors[fieldName][0];\n        }\n\n        return (\n            <ModalBody className=\"form\">\n                <Form>\n                    <FormGroup>\n                        <Label>Requirements Deadline</Label>\n                        <Input type=\"date\"\n                               defaultValue={this.state.form.requirement_deadline}\n                               onChange={this.getChangeHandler(\"requirement_deadline\")}\n                               valid={isValid(\"Requirements deadline\")}/>\n                        <FormFeedback>{fieldError(\"Requirements deadline\")}</FormFeedback>\n                    </FormGroup>\n\n                    <ProgramFormRequirements/>\n                </Form>\n            </ModalBody>\n        );\n    }\n\n    render() {\n        const { formHasErrors, fieldErrors } = this.state.step === \"Overview\" ?\n            this.getOverviewFormErrors() : this.getRequirementFormErrors();\n\n        let formBody;\n        let shouldShowFormFooter = false;\n\n        if (this.state.academic_years === null) {\n            formBody = <LoadingSpinner/>;\n        } else if (this.state.academic_years.length === 0) {\n            formBody = ProgramFormModal.noAcademicYearsState();\n        } else if (this.state.step === \"Overview\") {\n            formBody = this.overviewForm(fieldErrors);\n            shouldShowFormFooter = true;\n        } else {\n            formBody = this.requirementForm(fieldErrors);\n            shouldShowFormFooter = true;\n        }\n\n        return (\n            <Modal isOpen={this.props.isOpen}\n                   toggle={this.props.toggle}\n                   backdrop={true}>\n                <ModalHeader toggle={this.props.toggle}>\n                    Add a program\n                </ModalHeader>\n                {formBody}\n                {shouldShowFormFooter &&\n                <ModalFooter>\n                    {this.state.step === \"Requirement\" &&\n                    <div className=\"d-flex flex-row w-100\">\n                        <Button outline\n                                color=\"success\"\n                                className=\"mr-auto\"\n                                onClick={() => this.setState({ step : \"Overview\" })}>\n                            Back\n                        </Button>\n\n\n                        <Button outline\n                                color=\"success\"\n                                onClick={this.props.edit ? this.submitEditInstitutionForm : this.submitAddProgramForm}\n                                disabled={formHasErrors}>\n                            {this.props.edit ? \"Save changes\" : \"Add\"}\n                        </Button>\n\n\n                    </div>\n                    }\n\n                    {this.state.step === \"Overview\" &&\n                    <Button outline\n                            color=\"success\"\n                            onClick={() => this.setState({ step : \"Requirement\" })}\n                            disabled={formHasErrors}>\n                        Next\n                    </Button>\n                    }\n                </ModalFooter>\n                }\n            </Modal>\n\n        );\n    }\n}\n\nclass ProgramFormRequirements extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            requirements : [\"\"],\n        };\n\n        this.handleAddRequirement = this.handleAddRequirement.bind(this);\n        this.handleRemoveRequirement = this.handleRemoveRequirement.bind(this);\n        this.handleRequirementChange = this.handleRequirementChange.bind(this);\n\n    }\n\n    handleRequirementChange(index) {\n        return (newValue) => {\n            const requirements = this.state.requirements.map((requirement, candidateIndex) => {\n                if (index !== candidateIndex) {\n                    return requirement;\n                }\n\n                return newValue;\n            });\n\n            this.setState({\n                requirements : requirements,\n            });\n        };\n    }\n\n    handleAddRequirement() {\n        this.setState({\n            requirements : this.state.requirements.concat([\"\"]),\n        });\n    }\n\n    handleRemoveRequirement(index) {\n        return () => {\n            this.setState({\n                requirements : this.state.requirements.filter((requirement, candidateIndex) => {\n                    return candidateIndex !== index;\n                }),\n            });\n        };\n    }\n\n    render() {\n        const requirements = this.state.requirements.map((requirement, index) => {\n            return <ProgramFormRequirementRow key={index}\n                                              isLastItem={index + 1 === this.state.requirements.length}\n                                              hasRemoveButton={index > 0}\n                                              onRemoveButtonClick={this.handleRemoveRequirement(index)}\n                                              onAddButtonClick={this.handleAddRequirement}\n                                              onValueChange={this.handleRequirementChange(index)}\n                                              value={requirement}/>;\n        });\n\n        return (\n            <div>\n                <p>Applicant Requirements</p>\n                {requirements}\n            </div>\n        );\n    }\n}\n\nclass ProgramFormRequirementRow extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            value : this.props.value,\n        };\n\n        this.onValueChange = this.onValueChange.bind(this);\n        this.validateInput = this.validateInput.bind(this);\n    }\n\n    onValueChange(event) {\n        const value = event.target.value;\n        this.props.onValueChange(value);\n        this.setState({\n            value : value,\n        });\n\n    }\n\n    validateInput() {\n        return validateForm([{\n            name : \"Requirement\",\n            characterLimit : 64,\n            value : this.state.value,\n        }]);\n    }\n\n    componentWillReceiveProps(props) {\n        this.setState({\n            value : props.value,\n        });\n    }\n\n    render() {\n        const { formHasErrors, fieldErrors } = this.validateInput();\n\n        return (\n            <FormGroup>\n\n                <div className=\"d-flex flex-row\">\n                    <Input placeholder=\"Requirement\"\n                           value={this.state.value}\n                           onChange={this.onValueChange}\n                           className=\"w-75 mr-2\"\n                           valid={!formHasErrors}/>\n                    {this.props.hasRemoveButton && <Button outline\n                                                           color=\"danger\"\n                                                           className=\"mr-2\"\n                                                           onClick={this.props.onRemoveButtonClick}>-</Button>}\n                    {this.props.isLastItem && <Button outline\n                                                      color=\"success\"\n                                                      onClick={this.props.onAddButtonClick}>+</Button>}\n                </div>\n\n\n                <Input type=\"hidden\"\n                       valid={!formHasErrors}/>\n                <FormFeedback>{fieldErrors[\"Requirement\"][0]}</FormFeedback>\n            </FormGroup>\n        );\n    }\n}\n\nexport {\n    InstitutionFormModal,\n    ArchiveInstitutionModal,\n    MemorandumFormModal,\n    ArchiveMemorandumModal,\n    ProgramFormModal,\n};"]}