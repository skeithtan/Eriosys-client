{"version":3,"sources":["../../../../js/tabs/Institutions/institutions.js"],"names":["makeInstitutionsQuery","query","Institutions","props","state","institutionList","activeInstitution","addInstitutionIsShowing","memorandumToBeAdded","error","fetchInstitutions","bind","setActiveInstitution","toggleAddInstitution","toggleMemorandumToBeAdded","onArchiveActiveInstitution","onAddInstitution","setState","then","result","countries","catch","institution","activeYear","toString"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AAGA;;;;AACA;;;;;;;;;;;;AAGA,SAASA,qBAAT,GAAiC;AAC7B,WAAO,kBAAQC,KAAR,mMAAP;AAWH;;IAEKC,Y;;;AACF,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA,gIACTA,KADS;;AAGf,cAAKC,KAAL,GAAa;AACTC,6BAAkB,IADT;AAETC,+BAAoB,IAFX;AAGTC,qCAA0B,KAHjB;AAITC,iCAAsB,KAJb;AAKTC,mBAAQ;AALC,SAAb;;AAQA,cAAKC,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBC,IAAvB,OAAzB;AACA,cAAKC,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BD,IAA1B,OAA5B;;AAEA,cAAKE,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BF,IAA1B,OAA5B;AACA,cAAKG,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BH,IAA/B,OAAjC;;AAEA,cAAKI,0BAAL,GAAkC,MAAKA,0BAAL,CAAgCJ,IAAhC,OAAlC;AACA,cAAKK,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBL,IAAtB,OAAxB;;AAEA,cAAKD,iBAAL;AApBe;AAqBlB;;;;4CAEmB;AAAA;;AAChB,gBAAI,KAAKN,KAAL,CAAWK,KAAf,EAAsB;AAClB,qBAAKQ,QAAL,CAAc;AACVR,2BAAQ;AADE,iBAAd;AAGH;;AAEDT,oCACKkB,IADL,CACU,kBAAU;AACZ,uBAAKD,QAAL,CAAc;AACVZ,qCAAkBc,OAAOC;AADf,iBAAd;AAGH,aALL,EAMKC,KANL,CAMW;AAAA,uBAAS,OAAKJ,QAAL,CAAc;AACtBR,2BAAQA;AADc,iBAAd,CAAT;AAAA,aANX;AAUH;;;qDAE4B;AACzB,iBAAKQ,QAAL,CAAc;AACVX,mCAAoB;AADV,aAAd;;AAIA,iBAAKI,iBAAL;AACH;;;+CAEsB;AACnB,iBAAKO,QAAL,CAAc;AACVV,yCAA0B,CAAC,KAAKH,KAAL,CAAWG;AAD5B,aAAd;AAGH;;;6CAEoBe,W,EAAa;AAC9B,iBAAKL,QAAL,CAAc;AACVX,mCAAoBgB;AADV,aAAd;AAGH;;;yCAEgBA,W,EAAa;AAC1B,iBAAKL,QAAL,CAAc;AACVX,mCAAoBgB;AADV,aAAd;AAGA,iBAAKR,yBAAL;AACH;;;oDAE2B;AACxB,iBAAKG,QAAL,CAAc;AACVT,qCAAsB,CAAC,KAAKJ,KAAL,CAAWI;AADxB,aAAd;AAGH;;;iCAEQ;AAAA;;AACL,gBAAI,KAAKJ,KAAL,CAAWK,KAAf,EAAsB;AAClB,uBACI;AAAA;AAAA,sBAAY,oBAAoB;AAAA,mCAAM,OAAKC,iBAAL,CAAuB,OAAKN,KAAL,CAAWmB,UAAlC,CAAN;AAAA,yBAAhC;AACK,yBAAKnB,KAAL,CAAWK,KAAX,CAAiBe,QAAjB;AADL,iBADJ;AAKH;;AAED,mBACI;AAAA;AAAA,kBAAK,WAAU,2CAAf;AACI,4EAAiB,cAAc,KAAKpB,KAAL,CAAWC,eAA1C;AACiB,uCAAmB,KAAKD,KAAL,CAAWE,iBAD/C;AAEiB,0CAAsB,KAAKM,oBAF5C;AAGiB,0CAAsB,KAAKC,oBAH5C,GADJ;AAMI,8EAAmB,aAAa,KAAKT,KAAL,CAAWE,iBAA3C;AACmB,gDAA4B,KAAKS,0BADpD;AAEmB,yCAAqB,KAAKL,iBAF7C;AAGmB,yCAAqB,KAAKN,KAAL,CAAWI,mBAHnD;AAImB,+CAA2B,KAAKM,yBAJnD,GANJ;AAYI,8EAAsB,QAAQ,KAAKV,KAAL,CAAWG,uBAAzC;AACsB,4BAAQ,KAAKM,oBADnC;AAEsB,sCAAkB,KAAKG,gBAF7C;AAGsB,6BAAS,KAAKN,iBAHpC;AAZJ,aADJ;AAmBH;;;;;;kBAGUR,Y","file":"institutions.js","sourcesContent":["import React, { Component } from \"react\";\nimport InstitutionList from \"./institution_list\";\nimport InstitutionDetail from \"./institution_detail\";\nimport {\n    InstitutionFormModal,\n} from \"./modals\";\nimport graphql from \"../../graphql\";\nimport ErrorState from \"../../components/error_state\";\n\n\nfunction makeInstitutionsQuery() {\n    return graphql.query(`\n        {\n            countries {\n                name\n                institutions {\n                    id\n                    name\n                }\n            }\n        }\n    `);\n}\n\nclass Institutions extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            institutionList : null,\n            activeInstitution : null,\n            addInstitutionIsShowing : false,\n            memorandumToBeAdded : false,\n            error : null,\n        };\n\n        this.fetchInstitutions = this.fetchInstitutions.bind(this);\n        this.setActiveInstitution = this.setActiveInstitution.bind(this);\n\n        this.toggleAddInstitution = this.toggleAddInstitution.bind(this);\n        this.toggleMemorandumToBeAdded = this.toggleMemorandumToBeAdded.bind(this);\n\n        this.onArchiveActiveInstitution = this.onArchiveActiveInstitution.bind(this);\n        this.onAddInstitution = this.onAddInstitution.bind(this);\n\n        this.fetchInstitutions();\n    }\n\n    fetchInstitutions() {\n        if (this.state.error) {\n            this.setState({\n                error : null,\n            });\n        }\n\n        makeInstitutionsQuery()\n            .then(result => {\n                this.setState({\n                    institutionList : result.countries,\n                });\n            })\n            .catch(error => this.setState({\n                    error : error,\n                }),\n            );\n    }\n\n    onArchiveActiveInstitution() {\n        this.setState({\n            activeInstitution : null,\n        });\n\n        this.fetchInstitutions();\n    }\n\n    toggleAddInstitution() {\n        this.setState({\n            addInstitutionIsShowing : !this.state.addInstitutionIsShowing,\n        });\n    }\n\n    setActiveInstitution(institution) {\n        this.setState({\n            activeInstitution : institution,\n        });\n    }\n\n    onAddInstitution(institution) {\n        this.setState({\n            activeInstitution : institution,\n        });\n        this.toggleMemorandumToBeAdded();\n    }\n\n    toggleMemorandumToBeAdded() {\n        this.setState({\n            memorandumToBeAdded : !this.state.memorandumToBeAdded,\n        });\n    }\n\n    render() {\n        if (this.state.error) {\n            return (\n                <ErrorState onRetryButtonClick={() => this.fetchInstitutions(this.state.activeYear)}>\n                    {this.state.error.toString()}\n                </ErrorState>\n            );\n        }\n\n        return (\n            <div className=\"container-fluid d-flex flex-row p-0 h-100\">\n                <InstitutionList institutions={this.state.institutionList}\n                                 activeInstitution={this.state.activeInstitution}\n                                 setActiveInstitution={this.setActiveInstitution}\n                                 toggleAddInstitution={this.toggleAddInstitution}/>\n\n                <InstitutionDetail institution={this.state.activeInstitution}\n                                   onArchiveActiveInstitution={this.onArchiveActiveInstitution}\n                                   refreshInstitutions={this.fetchInstitutions}\n                                   memorandumToBeAdded={this.state.memorandumToBeAdded}\n                                   toggleMemorandumToBeAdded={this.toggleMemorandumToBeAdded}/>\n\n                <InstitutionFormModal isOpen={this.state.addInstitutionIsShowing}\n                                      toggle={this.toggleAddInstitution}\n                                      onAddInstitution={this.onAddInstitution}\n                                      refresh={this.fetchInstitutions}/>\n            </div>\n        );\n    }\n}\n\nexport default Institutions;"]}