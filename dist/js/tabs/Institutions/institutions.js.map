{"version":3,"sources":["../../../../js/tabs/Institutions/institutions.js"],"names":["fetchInstitutions","onResult","query","then","Institutions","props","state","institutionList","activeInstitution","addInstitutionIsShowing","memorandumToBeAdded","refreshInstitutions","bind","setActiveInstitution","toggleAddInstitution","toggleMemorandumToBeAdded","onDeleteActiveInstitution","onAddInstitution","setState","result","countries","institution"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AAGA;;;;;;;;;;;;AAGA,SAASA,iBAAT,CAA2BC,QAA3B,EAAqC;AACjC,sBAAQC,KAAR,oMAUGC,IAVH,CAUQF,QAVR;AAWH;;IAEKG,Y;;;AACF,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA,gIACTA,KADS;;AAGf,cAAKC,KAAL,GAAa;AACTC,6BAAkB,IADT;AAETC,+BAAoB,IAFX;AAGTC,qCAA0B,KAHjB;AAITC,iCAAsB;AAJb,SAAb;;AAOA,cAAKC,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBC,IAAzB,OAA3B;AACA,cAAKC,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BD,IAA1B,OAA5B;;AAEA,cAAKE,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BF,IAA1B,OAA5B;AACA,cAAKG,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BH,IAA/B,OAAjC;;AAEA,cAAKI,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BJ,IAA/B,OAAjC;AACA,cAAKK,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBL,IAAtB,OAAxB;;AAEA,cAAKD,mBAAL;AAnBe;AAoBlB;;;;8CAEqB;AAAA;;AAClBX,8BAAkB,kBAAU;AACxB,uBAAKkB,QAAL,CAAc;AACVX,qCAAkBY,OAAOC;AADf,iBAAd;AAGH,aAJD;AAKH;;;oDAE2B;AACxB,iBAAKF,QAAL,CAAc;AACVV,mCAAoB;AADV,aAAd;;AAIA,iBAAKG,mBAAL;AACH;;;+CAEsB;AACnB,iBAAKO,QAAL,CAAc;AACVT,yCAA0B,CAAC,KAAKH,KAAL,CAAWG;AAD5B,aAAd;AAGH;;;6CAEoBY,W,EAAa;AAC9B,iBAAKH,QAAL,CAAc;AACVV,mCAAoBa;AADV,aAAd;AAGH;;;yCAEgBA,W,EAAa;AAC1B,iBAAKH,QAAL,CAAc;AACVV,mCAAoBa;AADV,aAAd;AAGA,iBAAKN,yBAAL;AACH;;;oDAE2B;AACxB,iBAAKG,QAAL,CAAc;AACVR,qCAAsB,CAAC,KAAKJ,KAAL,CAAWI;AADxB,aAAd;AAGH;;;iCAEQ;AACL,mBACI;AAAA;AAAA,kBAAK,WAAU,2CAAf;AACI,4EAAiB,cAAe,KAAKJ,KAAL,CAAWC,eAA3C;AACiB,uCAAoB,KAAKD,KAAL,CAAWE,iBADhD;AAEiB,0CAAuB,KAAKK,oBAF7C;AAGiB,0CAAuB,KAAKC,oBAH7C,GADJ;AAMI,8EAAmB,aAAc,KAAKR,KAAL,CAAWE,iBAA5C;AACmB,+CAA4B,KAAKQ,yBADpD;AAEmB,yCAAsB,KAAKL,mBAF9C;AAGmB,yCAAsB,KAAKL,KAAL,CAAWI,mBAHpD;AAImB,+CAA4B,KAAKK,yBAJpD,GANJ;AAYI,8EAAsB,QAAS,KAAKT,KAAL,CAAWG,uBAA1C;AACsB,4BAAS,KAAKK,oBADpC;AAEsB,sCAAmB,KAAKG,gBAF9C;AAGsB,6BAAU,KAAKN,mBAHrC;AAZJ,aADJ;AAmBH;;;;;;kBAGUP,Y","file":"institutions.js","sourcesContent":["import React, { Component } from \"react\";\nimport InstitutionList from \"./institution_list\";\nimport InstitutionDetail from \"./institution_detail\";\nimport {\n    InstitutionFormModal,\n} from \"./modals\";\nimport graphql from \"../../graphql\";\n\n\nfunction fetchInstitutions(onResult) {\n    graphql.query(`\n        {\n            countries {\n                name\n                institutions {\n                    id\n                    name\n                }\n            }\n        }\n    `).then(onResult);\n}\n\nclass Institutions extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            institutionList : null,\n            activeInstitution : null,\n            addInstitutionIsShowing : false,\n            memorandumToBeAdded : false,\n        };\n\n        this.refreshInstitutions = this.refreshInstitutions.bind(this);\n        this.setActiveInstitution = this.setActiveInstitution.bind(this);\n\n        this.toggleAddInstitution = this.toggleAddInstitution.bind(this);\n        this.toggleMemorandumToBeAdded = this.toggleMemorandumToBeAdded.bind(this);\n\n        this.onDeleteActiveInstitution = this.onDeleteActiveInstitution.bind(this);\n        this.onAddInstitution = this.onAddInstitution.bind(this);\n\n        this.refreshInstitutions();\n    }\n\n    refreshInstitutions() {\n        fetchInstitutions(result => {\n            this.setState({\n                institutionList : result.countries,\n            });\n        });\n    }\n\n    onDeleteActiveInstitution() {\n        this.setState({\n            activeInstitution : null,\n        });\n\n        this.refreshInstitutions();\n    }\n\n    toggleAddInstitution() {\n        this.setState({\n            addInstitutionIsShowing : !this.state.addInstitutionIsShowing,\n        });\n    }\n\n    setActiveInstitution(institution) {\n        this.setState({\n            activeInstitution : institution,\n        });\n    }\n\n    onAddInstitution(institution) {\n        this.setState({\n            activeInstitution : institution,\n        });\n        this.toggleMemorandumToBeAdded();\n    }\n\n    toggleMemorandumToBeAdded() {\n        this.setState({\n            memorandumToBeAdded : !this.state.memorandumToBeAdded,\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"container-fluid d-flex flex-row p-0 h-100\">\n                <InstitutionList institutions={ this.state.institutionList }\n                                 activeInstitution={ this.state.activeInstitution }\n                                 setActiveInstitution={ this.setActiveInstitution }\n                                 toggleAddInstitution={ this.toggleAddInstitution }/>\n\n                <InstitutionDetail institution={ this.state.activeInstitution }\n                                   onDeleteActiveInstitution={ this.onDeleteActiveInstitution }\n                                   refreshInstitutions={ this.refreshInstitutions }\n                                   memorandumToBeAdded={ this.state.memorandumToBeAdded }\n                                   toggleMemorandumToBeAdded={ this.toggleMemorandumToBeAdded }/>\n\n                <InstitutionFormModal isOpen={ this.state.addInstitutionIsShowing }\n                                      toggle={ this.toggleAddInstitution }\n                                      onAddInstitution={ this.onAddInstitution }\n                                      refresh={ this.refreshInstitutions }/>\n            </div>\n        );\n    }\n}\n\nexport default Institutions;"]}