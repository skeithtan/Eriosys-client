{"version":3,"sources":["../../../../js/tabs/Institutions/institutions.js"],"names":["fetchInstitutions","onResponse","query","Institutions","props","state","institutionList","activeInstitution","addInstitutionIsShowing","deleteInstitutionIsShowing","refreshInstitutions","bind","setActiveInstitution","toggleAddInstitution","toggleDeleteInstitution","onDeleteActiveInstitution","setState","response","data","countries","institution"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AAIA;;;;;;;;;;;;AAGA,SAASA,iBAAT,CAA2BC,UAA3B,EAAuC;AACnC,2BAAQ;AACJC,sNADI;AAYJD,oBAAaA;AAZT,KAAR;AAcH;;IAEKE,Y;;;AACF,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA,gIACTA,KADS;;AAGf,cAAKC,KAAL,GAAa;AACTC,6BAAkB,IADT;AAETC,+BAAoB,IAFX;AAGTC,qCAA0B,KAHjB;AAITC,wCAA6B;AAJpB,SAAb;;AAOA,cAAKC,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBC,IAAzB,OAA3B;AACA,cAAKC,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BD,IAA1B,OAA5B;AACA,cAAKE,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BF,IAA1B,OAA5B;AACA,cAAKG,uBAAL,GAA+B,MAAKA,uBAAL,CAA6BH,IAA7B,OAA/B;AACA,cAAKI,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BJ,IAA/B,OAAjC;;AAEA,cAAKD,mBAAL;AAhBe;AAiBlB;;;;8CAEqB;AAAA;;AAClBV,8BAAkB,oBAAY;AAC1B,uBAAKgB,QAAL,CAAc;AACVV,qCAAkBW,SAASC,IAAT,CAAcC;AADtB,iBAAd;AAGH,aAJD;AAKH;;;oDAE2B;AACxB,iBAAKH,QAAL,CAAc;AACVT,mCAAoB;AADV,aAAd;;AAIA,iBAAKG,mBAAL;AACH;;;+CAEsB;AACnB,iBAAKM,QAAL,CAAc;AACVR,yCAA0B,CAAC,KAAKH,KAAL,CAAWG;AAD5B,aAAd;AAGH;;;kDAEyB;AACtB,iBAAKQ,QAAL,CAAc;AACVP,4CAA6B,CAAC,KAAKJ,KAAL,CAAWI;AAD/B,aAAd;AAGH;;;6CAEoBW,W,EAAa;AAC9B,iBAAKJ,QAAL,CAAc;AACVT,mCAAoBa;AADV,aAAd;AAGH;;;iCAEQ;AACL,mBACI;AAAA;AAAA,kBAAK,WAAU,2CAAf;AACI,4EAAiB,cAAc,KAAKf,KAAL,CAAWC,eAA1C;AACiB,uCAAmB,KAAKD,KAAL,CAAWE,iBAD/C;AAEiB,0CAAsB,KAAKK,oBAF5C;AAGiB,0CAAsB,KAAKC,oBAH5C,GADJ;AAKI,8EAAmB,aAAa,KAAKR,KAAL,CAAWE,iBAA3C;AACmB,6CAAyB,KAAKO,uBADjD,GALJ;AAOI,6EAAqB,QAAQ,KAAKT,KAAL,CAAWG,uBAAxC,EAAiE,QAAQ,KAAKK,oBAA9E;AACqB,6BAAS,KAAKH,mBADnC,GAPJ;AASK,qBAAKL,KAAL,CAAWE,iBAAX,KAAiC,IAAjC,IAAyC;AAC1C,gFAAwB,QAAQ,KAAKF,KAAL,CAAWI,0BAA3C;AACwB,iCAAa,KAAKJ,KAAL,CAAWE,iBADhD;AAEwB,4BAAQ,KAAKO,uBAFrC;AAGwB,6BAAS,KAAKC,yBAHtC;AAVJ,aADJ;AAiBH;;;;;;kBAGUZ,Y","file":"institutions.js","sourcesContent":["import React, { Component } from \"react\";\nimport InstitutionList from \"./institution_list\";\nimport InstitutionDetail from \"./institution_detail\";\nimport {\n    AddInstitutionModal,\n    DeleteInstitutionModal,\n} from \"./modals\";\nimport graphql from \"../../graphql\";\n\n\nfunction fetchInstitutions(onResponse) {\n    graphql({\n        query : `\n        {\n            countries {\n                name\n                institutionSet {\n                    id\n                    name\n                }\n            }\n        }\n        `,\n        onResponse : onResponse,\n    });\n}\n\nclass Institutions extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            institutionList : null,\n            activeInstitution : null,\n            addInstitutionIsShowing : false,\n            deleteInstitutionIsShowing : false,\n        };\n\n        this.refreshInstitutions = this.refreshInstitutions.bind(this);\n        this.setActiveInstitution = this.setActiveInstitution.bind(this);\n        this.toggleAddInstitution = this.toggleAddInstitution.bind(this);\n        this.toggleDeleteInstitution = this.toggleDeleteInstitution.bind(this);\n        this.onDeleteActiveInstitution = this.onDeleteActiveInstitution.bind(this);\n\n        this.refreshInstitutions();\n    }\n\n    refreshInstitutions() {\n        fetchInstitutions(response => {\n            this.setState({\n                institutionList : response.data.countries,\n            });\n        });\n    }\n\n    onDeleteActiveInstitution() {\n        this.setState({\n            activeInstitution : null,\n        });\n\n        this.refreshInstitutions();\n    }\n\n    toggleAddInstitution() {\n        this.setState({\n            addInstitutionIsShowing : !this.state.addInstitutionIsShowing,\n        });\n    }\n\n    toggleDeleteInstitution() {\n        this.setState({\n            deleteInstitutionIsShowing : !this.state.deleteInstitutionIsShowing,\n        });\n    }\n\n    setActiveInstitution(institution) {\n        this.setState({\n            activeInstitution : institution,\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"container-fluid d-flex flex-row p-0 h-100\">\n                <InstitutionList institutions={this.state.institutionList}\n                                 activeInstitution={this.state.activeInstitution}\n                                 setActiveInstitution={this.setActiveInstitution}\n                                 toggleAddInstitution={this.toggleAddInstitution}/>\n                <InstitutionDetail institution={this.state.activeInstitution}\n                                   toggleDeleteInstitution={this.toggleDeleteInstitution}/>\n                <AddInstitutionModal isOpen={this.state.addInstitutionIsShowing} toggle={this.toggleAddInstitution}\n                                     refresh={this.refreshInstitutions}/>\n                {this.state.activeInstitution !== null && //If activeInstitution is not null\n                <DeleteInstitutionModal isOpen={this.state.deleteInstitutionIsShowing}\n                                        institution={this.state.activeInstitution}\n                                        toggle={this.toggleDeleteInstitution}\n                                        refresh={this.onDeleteActiveInstitution}/>}\n            </div>\n        );\n    }\n}\n\nexport default Institutions;"]}