{"version":3,"sources":["../../../../../js/tabs/Home/tabs/memorandums.js"],"names":["fetchInstitutions","onResult","query","then","fetchMemorandumDetails","id","memorandumIsFetched","memorandum","category","undefined","makeCardInfo","memorandumType","institution","name","type","dateEffective","date_effective","dateExpiration","date_expiration","makeCardsFromInstitution","institutions","cards","forEach","latest_mou","push","latest_moa","sort","a","b","diff","Memorandums","props","state","activeCard","refreshCards","bind","setActiveCard","result","setState","length","emptyState","map","card","isActive","onBackgroundClick","event","target","currentTarget","MemorandumCard","renewModalIsOpen","toggleRenewModal","format","expirationToNow","fromNow","now","dateExpirationMoment","monthsBeforeExpiration","hasExpired","urgent","expirationClass","cardClass","active","collapseContent","linkages","onCardClick","onClick","MemorandumCardCollapseContent","isOpen","stateMemorandum","memorandum_file","college_initiator","collegeInitiator","colleges","linkage","index","linkageString","viewMemorandum","require","shell","openExternal","setTimeout"],"mappings":"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","file":"memorandums.js","sourcesContent":["import React, { Component } from \"react\";\nimport graphql from \"../../../graphql\";\nimport moment from \"moment\";\nimport scrollIntoView from \"scroll-into-view\";\nimport settings from \"../../../settings\";\nimport LoadingSpinner from \"../../../components/loading\";\n\nimport {\n    SectionRow,\n    SectionRowContent,\n    SectionRowTitle,\n} from \"../../../components/section\";\nimport {\n    Button,\n    Collapse,\n} from \"reactstrap\";\nimport { MemorandumFormModal } from \"../../Institutions/modals\";\n\n\nfunction fetchInstitutions(onResult) {\n    graphql.query(`\n    {\n      institutions {\n        id\n        name\n            latest_mou {\n                id\n                date_expiration\n            }\n            latest_moa {\n                id\n                date_expiration\n            }\n      }\n    }\n    `).then(onResult);\n}\n\nfunction fetchMemorandumDetails(id, onResult) {\n    graphql.query(`\n    {\n      memorandum(id: ${id}) {\n        id\n        category\n        memorandum_file\n        date_effective\n        date_expiration\n        college_initiator\n        linkages\n      }\n    }\n    `).then(onResult);\n}\n\nfunction memorandumIsFetched(memorandum) {\n    return memorandum.category !== undefined;\n}\n\nfunction makeCardInfo(memorandumType, institution, memorandum) {\n    return {\n        institution : {\n            name : institution.name,\n            id : institution.id,\n        },\n        memorandum : {\n            id : memorandum.id,\n            type : memorandumType,\n            dateEffective : moment(memorandum.date_effective),\n            dateExpiration : moment(memorandum.date_expiration),\n        },\n    };\n}\n\nfunction makeCardsFromInstitution(institutions) {\n    let cards = [];\n\n\n    institutions.forEach(institution => {\n        if (institution.latest_mou !== null && institution.latest_mou.date_expiration !== null) {\n            cards.push(makeCardInfo(\"Understanding\", institution, institution.latest_mou));\n        }\n\n        if (institution.latest_moa !== null && institution.latest_moa.date_expiration !== null) {\n            cards.push(makeCardInfo(\"Agreement\", institution, institution.latest_moa));\n        }\n    });\n\n\n    cards.sort((a, b) => {\n        return a.memorandum.dateExpiration.diff(b.memorandum.dateExpiration);\n    });\n\n    return cards;\n}\n\nclass Memorandums extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            cards : null,\n            activeCard : null,\n        };\n\n        this.refreshCards = this.refreshCards.bind(this);\n        this.setActiveCard = this.setActiveCard.bind(this);\n\n        fetchInstitutions(result => {\n            const institutions = result.institutions;\n            this.setState({\n                cards : makeCardsFromInstitution(institutions),\n            });\n        });\n    }\n\n    static emptyState() {\n        return (\n            <div className=\"loading-container h-100\">\n                <h3>There are no memorandums found with an expiration date</h3>\n            </div>\n        );\n    }\n\n    refreshCards() {\n        this.setState({\n            cards : null //clear first\n        });\n\n        fetchInstitutions(result => {\n            const institutions = result.institutions;\n            this.setState({\n                cards : makeCardsFromInstitution(institutions),\n            });\n        });\n    }\n\n    setActiveCard(id) {\n        this.setState({\n            activeCard : id,\n        });\n    }\n\n    render() {\n        if (this.state.cards === null) {\n            return <LoadingSpinner/>;\n        }\n\n        if (this.state.cards.length === 0) {\n            return Memorandums.emptyState();\n        }\n\n        const cards = this.state.cards.map(card => {\n            const id = card.memorandum.id;\n            const isActive = this.state.activeCard === id;\n            const setActiveCard = () => this.setActiveCard(id);\n            return <MemorandumCard key={id}\n                                   card={card}\n                                   onClick={setActiveCard}\n                                   active={isActive}\n                                   refreshCards={this.refreshCards}/>;\n        });\n\n        const onBackgroundClick = event => {\n            if (event.target === event.currentTarget) {\n                this.setActiveCard(null);\n            }\n        };\n\n        return (\n            <div className=\"d-flex flex-column align-items-center page-body p-4\"\n                 onClick={onBackgroundClick}>\n                {cards}\n            </div>\n        );\n    }\n}\n\nclass MemorandumCard extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            renewModalIsOpen : false,\n        };\n\n        this.toggleRenewModal = this.toggleRenewModal.bind(this);\n    }\n\n    toggleRenewModal() {\n        this.setState({\n            renewModalIsOpen : !this.state.renewModalIsOpen,\n        });\n    }\n\n    render() {\n        const dateExpiration = this.props.card.memorandum.dateExpiration.format(\"LL\");\n        const expirationToNow = this.props.card.memorandum.dateExpiration.fromNow();\n\n        const now = moment();\n        const dateExpirationMoment = this.props.card.memorandum.dateExpiration;\n        const monthsBeforeExpiration = dateExpirationMoment.diff(now, \"months\");\n        const hasExpired = dateExpirationMoment.diff(now, \"days\") <= 0;\n\n        const urgent = monthsBeforeExpiration <= 6;\n\n        let expirationClass = \"text-white \";\n        if (urgent) {\n            expirationClass += \"bg-danger\";\n        } else {\n            expirationClass += \"bg-dlsu-lighter\";\n        }\n\n        let cardClass = \"home-card rounded \";\n        if (this.props.active) {\n            cardClass += \"active\";\n        }\n\n        let collapseContent = null;\n\n        if (memorandumIsFetched(this.props.card.memorandum) || this.props.active) {\n            //Have we fetched it yet? This way we only mount those that have been fetched\n            //or if it hasn't been fetched but is active.\n            collapseContent =\n                <div>\n                    <MemorandumCardCollapseContent memorandum={this.props.card.memorandum}\n                                                   institution={this.props.card.institution}\n                                                   toggleRenewModal={this.toggleRenewModal}/>\n                    <MemorandumFormModal\n                        institution={this.props.card.institution}\n                        toggle={this.toggleRenewModal}\n                        isOpen={this.state.renewModalIsOpen}\n                        refresh={this.props.refreshCards}\n                        memorandum={{\n                            category : this.props.card.memorandum.category,\n                            linkages : this.props.card.memorandum.linkages,\n                        }}/>\n                </div>;\n        }\n\n        const onCardClick = () => {\n            scrollIntoView(this.card);\n            this.props.onClick();\n        };\n\n\n        return (\n            <div className={cardClass}\n                 onClick={onCardClick}\n                 ref={(card) => this.card = card}>\n                <SectionRow className={expirationClass}>\n                    <SectionRowContent large>{hasExpired ? \"Expired \" : \"Expires\"} {expirationToNow}</SectionRowContent>\n                </SectionRow>\n                <SectionRow>\n                    <SectionRowTitle>Institution Name</SectionRowTitle>\n                    <SectionRowContent large>{this.props.card.institution.name}</SectionRowContent>\n                </SectionRow>\n                <SectionRow>\n                    <SectionRowTitle>Memorandum Type</SectionRowTitle>\n                    <SectionRowContent large>{this.props.card.memorandum.type}</SectionRowContent>\n                </SectionRow>\n                <SectionRow>\n                    <SectionRowTitle>Date of Expiration</SectionRowTitle>\n                    <SectionRowContent large>{dateExpiration}</SectionRowContent>\n                </SectionRow>\n                <Collapse isOpen={this.props.active}>\n                    {collapseContent}\n                </Collapse>\n            </div>\n        );\n    }\n}\n\nclass MemorandumCardCollapseContent extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            memorandum : props.memorandum,\n            isOpen : false,\n        };\n\n        fetchMemorandumDetails(props.memorandum.id, result => {\n            let memorandum = result.memorandum;\n            let stateMemorandum = this.state.memorandum;\n\n            // Store fetched information in the instance\n            stateMemorandum.category = memorandum.category;\n            stateMemorandum.memorandum_file = memorandum.memorandum_file;\n            stateMemorandum.date_effective = memorandum.date_effective;\n            stateMemorandum.college_initiator = memorandum.college_initiator;\n            stateMemorandum.linkages = memorandum.linkages;\n\n            this.setState({\n                memorandum : memorandum,\n            });\n        });\n    }\n\n    render() {\n        const memorandum = this.state.memorandum;\n\n        if (!memorandumIsFetched(memorandum)) {\n            return (\n                <div className=\"card-details\">\n                    <LoadingSpinner noText/>\n                </div>\n            );\n        }\n\n        const dateEffective = moment(memorandum.date_effective).format(\"LL\");\n\n        let collegeInitiator = \"No college initiator\";\n        if (memorandum.college_initiator !== null) {\n            collegeInitiator = settings.colleges[memorandum.college_initiator];\n        }\n\n        let linkages = \"No linkages\";\n        if (memorandum.linkages.length > 0) {\n            linkages = \"\";\n\n            memorandum.linkages.forEach((linkage, index) => {\n                const linkageString = settings.linkages[linkage];\n                if (index === memorandum.linkages.length - 1) {\n                    linkages += linkageString;\n                } else {\n                    linkages += linkageString + \", \";\n                }\n            });\n        }\n\n        const viewMemorandum = () => {\n            require(\"electron\").shell.openExternal(this.props.memorandum.memorandum_file);\n        };\n\n        // Allows content to expand gracefully\n        if (!this.state.isOpen) {\n            setTimeout(() => {\n                this.setState({\n                    isOpen : true,\n                });\n            }, 200);\n        }\n\n        return (\n            <Collapse isOpen={this.state.isOpen}>\n                <SectionRow>\n                    <SectionRowTitle>Date Effective</SectionRowTitle>\n                    <SectionRowContent large>{dateEffective}</SectionRowContent>\n                </SectionRow>\n                <SectionRow>\n                    <SectionRowTitle>College Initiator</SectionRowTitle>\n                    <SectionRowContent large>{collegeInitiator}</SectionRowContent>\n                </SectionRow>\n                <SectionRow>\n                    <SectionRowTitle>Linkages</SectionRowTitle>\n                    <SectionRowContent large>{linkages}</SectionRowContent>\n                </SectionRow>\n                <SectionRow>\n                    <Button outline\n                            size=\"sm\"\n                            color=\"success\"\n                            className=\"mr-2\"\n                            onClick={viewMemorandum}>\n                        View memorandum document\n                    </Button>\n                    <Button outline\n                            size=\"sm\"\n                            color=\"success\"\n                            onClick={this.props.toggleRenewModal}>\n                        Renew Memorandum\n                    </Button>\n                </SectionRow>\n            </Collapse>\n        );\n\n    }\n}\n\nexport default Memorandums;"]}