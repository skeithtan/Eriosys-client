{"version":3,"sources":["../../../../js/tabs/Students/students.js"],"names":["tabs","name","image","activeImage","fetchStudents","category","onResult","query","then","Students","props","state","allStudents","activeStudent","addStudentIsShowing","activeTab","setActiveTab","bind","setActiveStudent","toggleAddStudent","refreshStudents","onDeleteActiveStudent","tab","setState","result","students","student"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;AAGA,IAAMA,OAAO,CACT;AACIC,UAAO,SADX;AAEIC,WAAQ,0BAFZ;AAGIC,iBAAc;AAHlB,CADS,EAMT;AACIF,UAAO,UADX;AAEIC,WAAQ,2BAFZ;AAGIC,iBAAc;AAHlB,CANS,CAAb;;AAcA,SAASC,aAAT,CAAuBC,QAAvB,EAAiCC,QAAjC,EAA2C;AACvC,sBAAQC,KAAR,2CAEyBF,QAFzB,qJAUGG,IAVH,CAUQF,QAVR;AAWH;;IAEKG,Q;;;AACF,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA,wHACTA,KADS;;AAGf,cAAKC,KAAL,GAAa;AACTC,yBAAc,IADL;AAETC,2BAAgB,IAFP;AAGTC,iCAAsB,KAHb;AAITC,uBAAYf,KAAK,CAAL;AAJH,SAAb;;AAOA,cAAKgB,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,OAApB;AACA,cAAKC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBD,IAAtB,OAAxB;AACA,cAAKE,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBF,IAAtB,OAAxB;AACA,cAAKG,eAAL,GAAuB,MAAKA,eAAL,CAAqBH,IAArB,OAAvB;AACA,cAAKI,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BJ,IAA3B,OAA7B;;AAGA,YAAMZ,WAAW,MAAKM,KAAL,CAAWI,SAAX,CAAqBd,IAArB,KAA8B,SAA9B,GAA0C,IAA1C,GAAiD,KAAlE;AACA,cAAKmB,eAAL,CAAqBf,QAArB;AAlBe;AAmBlB;;;;qCAEYiB,G,EAAK;AACd,gBAAIA,QAAQ,KAAKX,KAAL,CAAWI,SAAvB,EAAkC;AAC9B,uBAD8B,CACtB;AACX;;AAED,iBAAKQ,QAAL,CAAc;AACVR,2BAAYO,GADF;AAEVT,+BAAe,IAFL,CAEW;AAFX,aAAd;;AAKA,gBAAMR,WAAWiB,IAAIrB,IAAJ,KAAa,SAAb,GAAyB,IAAzB,GAAgC,KAAjD;AACA,iBAAKmB,eAAL,CAAqBf,QAArB;AACH;;;wCAEeA,Q,EAAU;AAAA;;AACtBD,0BAAcC,QAAd,EAAwB,kBAAU;AAC9B,uBAAKkB,QAAL,CAAc;AACVX,iCAAcY,OAAOC;AADX,iBAAd;AAGH,aAJD;AAKH;;;gDAEuB;AACpB,iBAAKF,QAAL,CAAc;AACVV,+BAAgB;AADN,aAAd;;AAIA,iBAAKO,eAAL;AACH;;;2CAEkB;AACf,iBAAKG,QAAL,CAAc;AACVT,qCAAsB,CAAC,KAAKH,KAAL,CAAWG;AADxB,aAAd;AAGH;;;yCAEgBY,O,EAAS;AACtB,iBAAKH,QAAL,CAAc;AACVV,+BAAgBa;AADN,aAAd;AAGH;;;iCAEQ;AACL,mBACI;AAAA;AAAA,kBAAK,WAAU,2CAAf;AACI,wEAAa,UAAU,KAAKf,KAAL,CAAWC,WAAlC;AACa,mCAAe,KAAKD,KAAL,CAAWE,aADvC;AAEa,sCAAkB,KAAKK,gBAFpC;AAGa,sCAAkB,KAAKC,gBAHpC;AAIa,kCAAc,KAAKH,YAJhC;AAKa,+BAAW,KAAKL,KAAL,CAAWI,SALnC;AAMa,0BAAMf,IANnB,GADJ;AAQK,qBAAKW,KAAL,CAAWE,aAAX,KAA6B,IAA7B,IAAqC,0DAAe,SAAS,KAAKF,KAAL,CAAWE,aAAnC;AACe,2CAAuB,KAAKQ,qBAD3C;AAEe,qCAAiB,KAAKD,eAFrC,GAR1C;AAWI,0EAAkB,QAAQ,KAAKT,KAAL,CAAWG,mBAArC;AACkB,4BAAQ,KAAKK,gBAD/B;AAEkB,6BAAS,KAAKC,eAFhC;AAXJ,aADJ;AAiBH;;;;;;kBAGUX,Q","file":"students.js","sourcesContent":["import React, { Component } from \"react\";\nimport graphql from \"../../graphql\";\nimport StudentList from \"./student_list\";\nimport StudentDetail from \"./student_detail\";\nimport { StudentFormModal, } from \"./modals\";\n\n\nconst tabs = [\n    {\n        name : \"Inbound\",\n        image : \"./images/inboundgrey.png\",\n        activeImage : \"./images/inboundgreen.png\",\n    },\n    {\n        name : \"Outbound\",\n        image : \"./images/outboundgrey.png\",\n        activeImage : \"./images/outboundgreen.png\",\n    },\n];\n\n\nfunction fetchStudents(category, onResult) {\n    graphql.query(`\n    {\n        students(category:\"${category}\") {\n            id\n            id_number\n            family_name\n            first_name\n            middle_name\n        }\n    }\n    `).then(onResult);\n}\n\nclass Students extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            allStudents : null,\n            activeStudent : null,\n            addStudentIsShowing : false,\n            activeTab : tabs[0],\n        };\n\n        this.setActiveTab = this.setActiveTab.bind(this);\n        this.setActiveStudent = this.setActiveStudent.bind(this);\n        this.toggleAddStudent = this.toggleAddStudent.bind(this);\n        this.refreshStudents = this.refreshStudents.bind(this);\n        this.onDeleteActiveStudent = this.onDeleteActiveStudent.bind(this);\n\n\n        const category = this.state.activeTab.name === \"Inbound\" ? \"IN\" : \"OUT\";\n        this.refreshStudents(category);\n    }\n\n    setActiveTab(tab) {\n        if (tab === this.state.activeTab) {\n            return; //Nothing to do here, activeTab is already the tab\n        }\n\n        this.setState({\n            activeTab : tab,\n            activeStudent: null, //Student is no longer in the same category\n        });\n\n        const category = tab.name === \"Inbound\" ? \"IN\" : \"OUT\";\n        this.refreshStudents(category);\n    }\n\n    refreshStudents(category) {\n        fetchStudents(category, result => {\n            this.setState({\n                allStudents : result.students,\n            });\n        });\n    }\n\n    onDeleteActiveStudent() {\n        this.setState({\n            activeStudent : null,\n        });\n\n        this.refreshStudents();\n    }\n\n    toggleAddStudent() {\n        this.setState({\n            addStudentIsShowing : !this.state.addStudentIsShowing,\n        });\n    }\n\n    setActiveStudent(student) {\n        this.setState({\n            activeStudent : student,\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"container-fluid d-flex flex-row p-0 h-100\">\n                <StudentList students={this.state.allStudents}\n                             activeStudent={this.state.activeStudent}\n                             setActiveStudent={this.setActiveStudent}\n                             toggleAddStudent={this.toggleAddStudent}\n                             setActiveTab={this.setActiveTab}\n                             activeTab={this.state.activeTab}\n                             tabs={tabs}/>\n                {this.state.activeStudent !== null && <StudentDetail student={this.state.activeStudent}\n                                                                     onDeleteActiveStudent={this.onDeleteActiveStudent}\n                                                                     refreshStudents={this.refreshStudents}/>}\n                <StudentFormModal isOpen={this.state.addStudentIsShowing}\n                                  toggle={this.toggleAddStudent}\n                                  refresh={this.refreshStudents}/>\n            </div>\n        );\n    }\n}\n\nexport default Students;"]}