{"version":3,"sources":["../../../../js/tabs/Students/student_detail.js"],"names":["fetchStudent","id","onResponse","query","StudentDetail","props","state","student","studentID","deleteStudentIsShowing","editStudentIsShowing","toggleDeleteStudent","bind","toggleEditStudent","onEditStudent","setState","response","data","refreshStudents","nextProps","idNumber","unselectedState","onDeleteActiveStudent","StudentDetailHead","firstName","middleName","familyName","StudentDetailBody"],"mappings":"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","file":"student_detail.js","sourcesContent":["import React, { Component } from \"react\";\nimport {\n    Button,\n} from \"reactstrap\";\nimport {\n    StudentDetailOverview,\n    StudentContact,\n    StudentUniversity,\n\n} from \"./student_detail_overview\";\nimport {\n    DeleteStudentModal,\n    EditStudentModal,\n\n} from \"./modals\";\nimport LoadingSpinner from \"../../loading\";\nimport graphql from \"../../graphql\";\n\n\nfunction fetchStudent(id, onResponse) {\n    graphql({\n        query : `\n        {\n            student(id:${id}) {\n                category\n                idNumber\n                college\n                familyName\n                firstName\n                middleName\n                nickname\n                nationality\n                homeAddress\n                phoneNumber\n                birthDate\n                sex\n                emergencyContactName\n                emergencyContactRelationship\n                emergencyContactNumber\n                email\n                civilStatus\n            }\n        }\n       `,\n        onResponse : onResponse,\n    });\n}\n\nclass StudentDetail extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            student : null,\n            studentID : null,\n            deleteStudentIsShowing: false,\n            editStudentIsShowing: false,\n        };\n\n        this.toggleDeleteStudent = this.toggleDeleteStudent.bind(this);\n        this.toggleEditStudent = this.toggleEditStudent.bind(this);\n        this.onEditStudent = this.onEditStudent.bind(this);\n    }\n\n    toggleDeleteStudent() {\n        this.setState({\n            deleteStudentIsShowing: !this.state.deleteStudentIsShowing,\n        });\n    }\n\n    toggleEditStudent() {\n        this.setState({\n            editStudentIsShowing: !this.state.editStudentIsShowing,\n        });\n    }\n\n    static unselectedState() {\n        return (\n            <div className=\"loading-container\">\n                <h3>Select a student to see its details</h3>\n            </div>\n        );\n    }\n\n    onEditStudent() {\n        this.setState({\n            student: null,\n        });\n\n        fetchStudent(this.state.studentID, response => {\n            const student = response.data.student;\n            this.setState({\n                student: student,\n            });\n            this.props.refreshStudents();\n        });\n    }\n\n    componentWillReceiveProps(nextProps) {\n        const student = nextProps.student;\n\n        if (student === null) {\n            this.setState({\n                student : null,\n                studentID : null,\n            });\n\n            return;\n        }\n\n        this.setState({\n            studentID : student.idNumber,\n            student : null,\n        });\n\n        fetchStudent(student.idNumber, response => {\n            this.setState({\n                student : response.data.student,\n            });\n        });\n    }\n\n    render() {\n        if (this.state.studentID === null) {\n            return StudentDetail.unselectedState();\n        }\n\n        if (this.state.student === null) {\n            return <LoadingSpinner/>;\n        }\n\n        return (\n            <div id=\"student-detail\" className=\"container-fluid d-flex flex-column p-0\">\n                <StudentDetailHead student={this.state.student}\n                                   toggleDeleteStudent={this.toggleDeleteStudent}\n                                   toggleEditStudent={this.toggleEditStudent}/>\n                <StudentDetailBody student={this.state.student}/>\n\n                {this.state.student !== null && //If activeStudent is not null\n                <DeleteStudentModal isOpen={this.state.deleteStudentIsShowing}\n                                    student={this.state.student}\n                                    toggle={this.toggleDeleteStudent}\n                                    refresh={this.props.onDeleteActiveStudent}/>}\n\n                {this.state.student !== null &&\n                <EditStudentModal isOpen={this.state.editStudentIsShowing}\n                                  student={this.state.student}\n                                  refresh={this.onEditStudent}\n                                  toggle={this.toggleEditStudent}/>}\n            </div>\n        );\n    }\n}\n\nclass StudentDetailHead extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className=\"page-head pt-5 d-flex flex-row align-items-center\">\n                <div className=\"mr-auto\">\n                    <h4 className=\"page-head-title justify-content-left d-inline-block mb-0 mr-2\">\n                        {this.props.student.firstName} {this.props.student.middleName} {this.props.student.familyName}\n                        <small className=\"text-muted ml-2\">{this.props.student.idNumber}</small>\n                    </h4>\n                </div>\n\n                <div className=\"page-head-actions\">\n                    <Button outline size=\"sm\" color=\"success\" className=\"mr-2\" onClick={this.props.toggleEditStudent}>Edit Student</Button>\n                    <Button outline size=\"sm\" color=\"danger\" onClick={this.props.toggleDeleteStudent}>Delete</Button>\n                </div>\n            </div>\n        );\n    }\n}\n\nclass StudentDetailBody extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className=\"page-body\">\n                <StudentDetailOverview student={this.props.student}/>\n                <StudentContact student={this.props.student}/>\n                <StudentUniversity student={this.props.student}/>\n            </div>\n        );\n    }\n}\n\nexport default StudentDetail;"]}