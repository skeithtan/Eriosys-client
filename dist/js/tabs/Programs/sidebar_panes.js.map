{"version":3,"sources":["../../../../js/tabs/Programs/sidebar_panes.js"],"names":["fetchAcademicYear","id","onResult","console","log","query","then","termsIsFetched","year","terms","undefined","AcademicYearSidebarPane","props","state","editAcademicYearIsShowing","deleteAcademicYearIsShowing","academicYear","academic_year_start","result","setState","academicYearFull","parseInt","map","term","TermSection","startDate","start_date","format","endDate","end_date","number"],"mappings":";;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AAQA;;;;;;;;;;;;AAGA,SAASA,iBAAT,CAA2BC,EAA3B,EAA+BC,QAA/B,EAAyC;AACrCC,YAAQC,GAAR,CAAYH,EAAZ;AACA,sBAAQI,KAAR,kCAEiBJ,EAFjB,oHASGK,IATH,CASQJ,QATR;AAUH;;AAED,SAASK,cAAT,CAAwBC,IAAxB,EAA8B;AAC1B,WAAOA,KAAKC,KAAL,KAAeC,SAAtB;AACH;;IAEKC,uB;;;AACF,qCAAYC,KAAZ,EAAmB;AAAA;;AAAA,sJACTA,KADS;;AAGf,cAAKC,KAAL,GAAa;AACTC,uCAA4B,KADnB;AAETC,yCAA8B,KAFrB;AAGTC,0BAAeJ,MAAMI;AAHZ,SAAb;;AAMA,YAAI,CAACT,eAAeK,MAAMI,YAArB,CAAL,EAAyC;AACrChB,8BAAkBY,MAAMI,YAAN,CAAmBC,mBAArC,EAA0D,kBAAU;AAChEL,sBAAMI,YAAN,CAAmBP,KAAnB,GAA2BS,OAAOT,KAAlC;;AAEA,sBAAKU,QAAL,CAAc;AACVH,kCAAeJ,MAAMI;AADX,iBAAd;AAGH,aAND;AAOH;AAjBc;AAkBlB;;;;kDAEyBJ,K,EAAO;AAAA;;AAC7B,iBAAKO,QAAL,CAAc;AACVH,8BAAeJ,MAAMI;AADX,aAAd;;AAIA,gBAAI,CAACT,eAAeK,MAAMI,YAArB,CAAL,EAAyC;AACrChB,kCAAkBY,MAAMI,YAAN,CAAmBC,mBAArC,EAA0D,kBAAU;AAChEL,0BAAMI,YAAN,CAAmBP,KAAnB,GAA2BS,OAAOT,KAAlC;;AAEA,2BAAKU,QAAL,CAAc;AACVH,sCAAeJ,MAAMI;AADX,qBAAd;AAGH,iBAND;AAOH;AACJ;;;iCAEQ;AACL,gBAAMA,eAAe,KAAKH,KAAL,CAAWG,YAAhC;;AAEA,gBAAI,CAACT,eAAeS,YAAf,CAAL,EAAmC;AAC/B,uBAAO,sDAAP;AACH;;AAED,gBAAMI,mBAAsBJ,aAAaC,mBAAnC,YAA4DI,SAASL,aAAaC,mBAAtB,IAA6C,CAAzG,CAAN;;AAEA,gBAAMR,QAAQO,aAAaP,KAAb,CAAmBa,GAAnB,CAAuB,gBAAQ;AACzC,uBAAO,8BAAC,WAAD,IAAa,MAAMC,IAAnB;AACa,yBAAKA,KAAKtB,EADvB,GAAP;AAEH,aAHa,CAAd;;AAKA,mBACI;AAAA;AAAA,kBAAK,WAAU,8BAAf;AACI;AAAA;AAAA,sBAAK,WAAU,gDAAf;AACI;AAAA;AAAA,0BAAK,WAAU,SAAf;AACI;AAAA;AAAA,8BAAI,WAAU,MAAd;AAAsBmB;AAAtB;AADJ;AADJ,iBADJ;AAOI;AAAA;AAAA,sBAAK,WAAU,WAAf;AACKX;AADL;AAPJ,aADJ;AAcH;;;;;;IAGCe,W;;;AACF,yBAAYZ,KAAZ,EAAmB;AAAA;;AAAA,yHACTA,KADS;AAElB;;;;iCAEQ;AACL,gBAAMa,YAAY,sBAAO,KAAKb,KAAL,CAAWW,IAAX,CAAgBG,UAAvB,EAAmCC,MAAnC,CAA0C,IAA1C,CAAlB;AACA,gBAAMC,UAAU,sBAAO,KAAKhB,KAAL,CAAWW,IAAX,CAAgBM,QAAvB,EAAiCF,MAAjC,CAAwC,IAAxC,CAAhB;;AAGA,mBACI;AAAA;AAAA;AACI;AAAA;AAAA;AAAA;AAAoB,yBAAKf,KAAL,CAAWW,IAAX,CAAgBO;AAApC,iBADJ;AAEI;AAAA;AAAA;AACI;AAAA;AAAA;AACI;AAAA;AAAA;AAAA;AAAA,yBADJ;AAEI;AAAA;AAAA;AAAoBL;AAApB;AAFJ,qBADJ;AAKI;AAAA;AAAA;AACI;AAAA;AAAA;AAAA;AAAA,yBADJ;AAEI;AAAA;AAAA;AAAoBG;AAApB;AAFJ;AALJ;AAFJ,aADJ;AAeH;;;;;;QAGIjB,uB,GAAAA,uB","file":"sidebar_panes.js","sourcesContent":["import React, { Component } from \"react\";\nimport graphql from \"../../graphql\";\nimport LoadingSpinner from \"../../components/loading\";\nimport {\n    Section,\n    SectionRow,\n    SectionRowContent,\n    SectionRowTitle,\n    SectionTable,\n    SectionTitle,\n} from \"../../components/section\";\nimport moment from \"moment\";\n\n\nfunction fetchAcademicYear(id, onResult) {\n    console.log(id);\n    graphql.query(`\n    {\n        terms(year:${id}) {\n            id\n            number\n            start_date\n            end_date\n        }\n    }\n    `).then(onResult);\n}\n\nfunction termsIsFetched(year) {\n    return year.terms !== undefined;\n}\n\nclass AcademicYearSidebarPane extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            editAcademicYearIsShowing : false,\n            deleteAcademicYearIsShowing : false,\n            academicYear : props.academicYear,\n        };\n\n        if (!termsIsFetched(props.academicYear)) {\n            fetchAcademicYear(props.academicYear.academic_year_start, result => {\n                props.academicYear.terms = result.terms;\n\n                this.setState({\n                    academicYear : props.academicYear,\n                });\n            });\n        }\n    }\n\n    componentWillReceiveProps(props) {\n        this.setState({\n            academicYear : props.academicYear,\n        });\n\n        if (!termsIsFetched(props.academicYear)) {\n            fetchAcademicYear(props.academicYear.academic_year_start, result => {\n                props.academicYear.terms = result.terms;\n\n                this.setState({\n                    academicYear : props.academicYear,\n                });\n            });\n        }\n    }\n\n    render() {\n        const academicYear = this.state.academicYear;\n\n        if (!termsIsFetched(academicYear)) {\n            return <LoadingSpinner/>;\n        }\n\n        const academicYearFull = `${academicYear.academic_year_start} - ${parseInt(academicYear.academic_year_start) + 1}`;\n\n        const terms = academicYear.terms.map(term => {\n            return <TermSection term={term}\n                                key={term.id}/>;\n        });\n\n        return (\n            <div className=\"p-0 h-100 d-flex flex-column\">\n                <div className=\"page-head pt-5 d-flex flex-row align-items-end\">\n                    <div className=\"mr-auto\">\n                        <h5 className=\"mb-0\">{academicYearFull}</h5>\n                    </div>\n                </div>\n\n                <div className=\"page-body\">\n                    {terms}\n                </div>\n            </div>\n        );\n\n    }\n}\n\nclass TermSection extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const startDate = moment(this.props.term.start_date).format(\"LL\");\n        const endDate = moment(this.props.term.end_date).format(\"LL\");\n\n\n        return (\n            <Section>\n                <SectionTitle>Term {this.props.term.number}</SectionTitle>\n                <SectionTable>\n                    <SectionRow>\n                        <SectionRowTitle>Start Date</SectionRowTitle>\n                        <SectionRowContent>{startDate}</SectionRowContent>\n                    </SectionRow>\n                    <SectionRow>\n                        <SectionRowTitle>End Date</SectionRowTitle>\n                        <SectionRowContent>{endDate}</SectionRowContent>\n                    </SectionRow>\n                </SectionTable>\n            </Section>\n        );\n    }\n}\n\nexport { AcademicYearSidebarPane };"]}