{"version":3,"sources":["../../../../js/tabs/Programs/programs.js"],"names":["fetchYears","onResult","query","then","fetchPrograms","year","term","fetchStudents","id","Programs","props","state","yearList","programList","studentList","activeYear","activeTerm","activeProgram","activeStudyField","refreshYears","bind","setActiveYear","setActiveTerm","setActiveProgram","refreshStudents","setState","result","academic_years","programs","program"],"mappings":"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","file":"programs.js","sourcesContent":["import React, { Component } from \"react\";\nimport YearList from \"./year_list\";\nimport ProgramList from \"./program_list\";\nimport StudentList from \"./student_list\";\nimport terms from \"./terms_list\";\nimport graphql from \"../../graphql\";\n\n\nfunction fetchYears(onResult) {\n    graphql.query(`\n    {\n        academic_years {\n            academic_year_start\n        }\n    }\n    `).then(onResult);\n}\n\nfunction fetchPrograms(year, term, onResult) {\n    graphql.query(`\n    {\n        programs(year:${year}, term:${term}) {\n            name\n            memorandum {\n                institution {\n                    name\n                }\n            }\n            terms {\n                number\n            }\n        }\n    }\n    `).then(onResult);\n}\n\nfunction fetchStudents(id, onResult) {\n    graphql.query(`\n    {\n        program(id:${id}) {\n            id\n            studyfield_set {\n                id\n                name\n                studentprogram_set {\n                    student {\n                        id\n                        id_number\n                        first_name\n                        middle_name\n                        family_name\n                    }\n                }\n            }\n        }\n    }\n    `).then(onResult);\n}\n\nclass Programs extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            yearList : null,\n            programList : null,\n            studentList : null,\n            activeYear : null,\n            activeTerm : 1,\n            activeProgram : null,\n            activeStudyField : null,\n        };\n\n        this.refreshYears = this.refreshYears.bind(this);\n        this.setActiveYear = this.setActiveYear.bind(this);\n        this.setActiveTerm = this.setActiveTerm.bind(this);\n        this.setActiveProgram = this.setActiveProgram.bind(this);\n        this.refreshStudents = this.refreshStudents.bind(this);\n        this.refreshYears();\n    }\n\n    refreshYears() {\n        fetchYears(result => {\n            this.setState({\n                yearList : result.academic_years,\n            });\n        });\n    }\n\n    setActiveYear(year) {\n        this.setState({\n            activeYear : year,\n            activeProgram : null,\n        });\n\n        fetchPrograms(year, this.state.activeTerm, result => {\n            this.setState({\n                programList : result.programs,\n            });\n        });\n    }\n\n    setActiveTerm(term) {\n        this.setState({\n            activeTerm : term,\n            activeProgram : null,\n        });\n\n        fetchPrograms(this.state.activeYear, term, result => {\n            this.setState({\n                programList : result.programs,\n            });\n        });\n    }\n\n    setActiveProgram(program) {\n        this.setState({\n            activeProgram : program,\n        });\n\n        fetchStudents(program.id, result => {\n            this.setState({\n                studentList : result.program,\n            });\n        });\n    }\n\n    refreshStudents() {\n        fetchStudents(program.id, result => {\n            this.setState({\n                studentList : result.program,\n            });\n        });\n    }\n\n    render() {\n        return (\n            <div id=\"programs-page\" className=\"container-fluid d-flex flex-row p-0 h-100 page-body\">\n                <YearList yearList={ this.state.yearList }\n                          setActiveYear={ this.setActiveYear }\n                          activeYear={ this.state.activeYear }/>\n                { this.state.activeYear !== null &&\n                <ProgramList programList={ this.state.programList }\n                             activeYear={ this.state.activeYear }\n                             activeTerm={ this.state.activeTerm }\n                             activeProgram={ this.state.activeProgram }\n                             setActiveTerm={ this.setActiveTerm }\n                             setActiveProgram={ this.setActiveProgram }/>\n                }\n                { this.state.activeProgram !== null &&\n                <StudentList studentList={ this.state.studentList }\n                             activeProgram={ this.state.activeProgram }\n                             refreshStudents={ this.refreshStudents }/>\n                }\n            </div>\n        );\n    }\n}\n\nexport default Programs;"]}