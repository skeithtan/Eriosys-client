{"version":3,"sources":["../../../../js/tabs/Programs/programs.js"],"names":["fetchYears","onResult","query","then","fetchPrograms","year","term","Programs","props","state","yearList","programList","activeYear","activeTerm","activeProgram","activeStudyField","refreshYears","bind","setActiveYear","setActiveTerm","setActiveProgram","setActiveStudyField","setState","result","academic_years","programs","console","log","program","studyField"],"mappings":"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","file":"programs.js","sourcesContent":["import React, { Component } from \"react\";\nimport YearList from \"./year_list\";\nimport ProgramList from \"./program_list\";\nimport ProgramListTabBar from \"./program_list_tabs\";\nimport StudyFieldList from \"./study_field_list\";\nimport StudentList from \"./student_list\";\nimport graphql from \"../../graphql\";\n\n\nfunction fetchYears(onResult) {\n    graphql.query(`\n    {\n        academic_years {\n            academic_year_start\n        }\n    }\n    `).then(onResult);\n}\n\nfunction fetchPrograms(year, term, onResult) {\n    graphql.query(`\n    {\n        programs(year:${year}, term:${term}) {\n            name\n            memorandum {\n                institution {\n                    name\n                }\n            }\n            terms {\n                number\n            }\n        }\n    }\n    `).then(onResult);\n}\n\nclass Programs extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            yearList : null,\n            programList : null,\n            activeYear : null,\n            activeTerm : 1,\n            activeProgram : null,\n            activeStudyField : null,\n        };\n\n        this.refreshYears = this.refreshYears.bind(this);\n        this.setActiveYear = this.setActiveYear.bind(this);\n        this.setActiveTerm = this.setActiveTerm.bind(this);\n        this.setActiveProgram = this.setActiveProgram.bind(this);\n        this.setActiveStudyField = this.setActiveStudyField.bind(this);\n\n        this.refreshYears();\n    }\n\n    refreshYears() {\n        fetchYears(result => {\n            this.setState({\n                yearList : result.academic_years,\n            });\n        });\n    }\n\n    setActiveYear(year) {\n        this.setState({\n            activeYear : year,\n        });\n\n        fetchPrograms(year, this.state.activeTerm, result => {\n            this.setState({\n                programList : result.programs,\n            });\n        });\n    }\n\n    setActiveTerm(term) {\n        this.setState({\n            activeTerm : term,\n        });\n\n        fetchPrograms(this.state.activeYear, term, result => {\n            console.log(result.programs);\n            this.setState({\n                programList : result.programs,\n            });\n        });\n    }\n\n    setActiveProgram(program) {\n        console.log(program);\n        this.setState({\n            activeProgram : program,\n        });\n    }\n\n    setActiveStudyField(studyField) {\n        this.setState({\n            activeStudyField : studyField,\n        });\n    }\n\n    render() {\n        return (\n            <div id=\"programs-page\" className=\"container-fluid d-flex flex-row p-0 h-100 page-body\">\n                <YearList yearList={ this.state.yearList }\n                          setActiveYear={ this.setActiveYear }\n                          activeYear={ this.state.activeYear }/>\n                { this.state.activeYear !== null &&\n                <div id=\"program-list\" className=\"d-flex flex-column p-0 h-100\">\n                    <ProgramList programList={ this.state.programList }\n                                 activeYear={ this.state.activeYear }\n                                 activeTerm={ this.state.activeTerm }\n                                 activeProgram={ this.state.activeProgram }\n                                 setActiveProgram={ this.setActiveProgram }/>\n                    <ProgramListTabBar activeTerm={ this.state.activeTerm }\n                                       setActiveTerm={ this.setActiveTerm }/>\n                </div> }\n                { this.state.activeProgram !== null && <StudentList/> }\n            </div>\n        );\n    }\n}\n\nexport default Programs;"]}