{"version":3,"sources":["../../../../../js/tabs/StudentApplications/tabs/modals.js"],"names":["DeployApplicantModal","props","state","form","default_units","total_units_enrolled","getFormErrors","bind","deployStudent","$","post","url","serverURL","student","id","beforeSend","data","then","refreshStudents","success","title","message","fail","console","log","error","toggle","fieldName","value","event","target","setState","isValidIntegerValidator","isValid","test","fieldValue","errorMessage","isPositiveIntegerValidator","parseInt","name","characterLimit","customValidators","formHasErrors","fieldErrors","length","fieldError","isOpen","getChangeHandler","AcceptApplicantModal","inbound_courses","acceptStudent","JSON","stringify","contentType"],"mappings":"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","file":"modals.js","sourcesContent":["import React, { Component } from \"react\";\nimport validateForm from \"../../../form_validator\";\nimport {\n    Button,\n    Form,\n    FormFeedback,\n    FormGroup,\n    Input,\n    Label,\n    Modal,\n    ModalBody,\n    ModalFooter,\n    ModalHeader,\n} from \"reactstrap\";\nimport authorizeXHR from \"../../../authorization\";\nimport settings from \"../../../settings\";\nimport iziToast from \"izitoast\";\n\n\nclass DeployApplicantModal extends Component {\n    constructor(props) {\n        super(props);\n\n\n        this.state = {\n            form : {\n                default_units : \"\",\n                total_units_enrolled : \"\",\n            },\n        };\n\n        this.getFormErrors = this.getFormErrors.bind(this);\n        this.deployStudent = this.deployStudent.bind(this);\n    }\n\n    deployStudent() {\n        $.post({\n            url : `${settings.serverURL}/programs/outbound/students/${this.props.student.id}/deploy/`,\n            beforeSend : authorizeXHR,\n            data : this.state.form,\n        }).then(() => {\n            this.props.refreshStudents();\n            iziToast.success({\n                title : \"Deployed\",\n                message : \"Student has been deployed\",\n            });\n        }).fail(error => {\n            console.log(error);\n\n            iziToast.error({\n                title : \"Error\",\n                message : \"Unable to deploy student\",\n            });\n        });\n\n        this.props.toggle();\n    }\n\n    getChangeHandler(fieldName) {\n        const form = this.state.form;\n\n        return event => {\n            const value = event.target.value;\n\n            form[fieldName] = value;\n            this.setState({\n                form : form,\n            });\n        };\n    }\n\n    getFormErrors() {\n        const isValidIntegerValidator = {\n            isValid : fieldValue => /^-{0,1}\\d+$/.test(fieldValue),\n            errorMessage : fieldValue => `${fieldValue} must be a valid integer`,\n        };\n\n        const isPositiveIntegerValidator = {\n            isValid : fieldValue => parseInt(fieldValue) > 0,\n            errorMessage : fieldValue => `${fieldValue} must be greater than 0.`,\n        };\n\n        return validateForm([\n            {\n                name : \"Default units\",\n                characterLimit : null,\n                value : this.state.form.default_units,\n                customValidators : [isValidIntegerValidator, isPositiveIntegerValidator],\n            },\n            {\n                name : \"Total units enrolled\",\n                characterLimit : null,\n                value : this.state.form.total_units_enrolled,\n                customValidators : [isValidIntegerValidator, isPositiveIntegerValidator],\n            },\n        ]);\n    }\n\n    render() {\n\n        const { formHasErrors, fieldErrors } = this.getFormErrors();\n\n        function isValid(fieldName) {\n            return fieldErrors[fieldName].length === 0;\n        }\n\n        function fieldError(fieldName) {\n            return fieldErrors[fieldName][0];\n        }\n\n        return (\n            <Modal isOpen={this.props.isOpen}\n                   toggle={this.props.toggle}\n                   backdrop={true}>\n                <ModalHeader toggle={this.props.toggle}>\n                    Deploy Student\n                </ModalHeader>\n                <ModalBody className=\"form\">\n                    <Form>\n                        <FormGroup>\n                            <Label>Default Units</Label>\n                            <Input placeholder=\"Default Units\"\n                                   onChange={this.getChangeHandler(\"default_units\")}\n                                   valid={isValid(\"Default units\")}\n                                   value={this.state.form.default_units}/>\n                            <FormFeedback>{fieldError(\"Default units\")}</FormFeedback>\n                        </FormGroup>\n\n                        <FormGroup>\n                            <Label>Total Units Enrolled</Label>\n                            <Input placeholder=\"Total Units Enrolled\"\n                                   onChange={this.getChangeHandler(\"total_units_enrolled\")}\n                                   valid={isValid(\"Total units enrolled\")}\n                                   value={this.state.form.total_units_enrolled}/>\n                            <FormFeedback>{fieldError(\"Total units enrolled\")}</FormFeedback>\n                        </FormGroup>\n                    </Form>\n                </ModalBody>\n                <ModalFooter>\n                    <Button outline\n                            color=\"success\"\n                            onClick={this.deployStudent}\n                            disabled={formHasErrors}>\n                        Deploy Student\n                    </Button>\n                </ModalFooter>\n\n            </Modal>\n        );\n    }\n}\n\nclass AcceptApplicantModal extends Component {\n    constructor(props) {\n        super(props);\n\n\n        this.state = {\n            form : {\n                total_units_enrolled : \"\",\n                inbound_courses : [],\n            },\n        };\n\n        this.getFormErrors = this.getFormErrors.bind(this);\n        this.acceptStudent = this.acceptStudent.bind(this);\n    }\n\n    acceptStudent() {\n        $.post({\n            url : `${settings.serverURL}/programs/inbound/students/${this.props.student.id}/accept/`,\n            beforeSend : authorizeXHR,\n            data : JSON.stringify(this.state.form),\n            contentType : \"application/json\",\n        }).then(() => {\n            this.props.refreshStudents();\n            iziToast.success({\n                title : \"Accepted\",\n                message : \"Student has been accepted\",\n            });\n        }).fail(error => {\n            console.log(error);\n\n            iziToast.error({\n                title : \"Error\",\n                message : \"Unable to accept student\",\n            });\n        });\n\n        this.props.toggle();\n    }\n\n    getChangeHandler(fieldName) {\n        const form = this.state.form;\n\n        return event => {\n            const value = event.target.value;\n\n            form[fieldName] = value;\n            this.setState({\n                form : form,\n            });\n        };\n    }\n\n    getFormErrors() {\n        const isValidIntegerValidator = {\n            isValid : fieldValue => /^-{0,1}\\d+$/.test(fieldValue),\n            errorMessage : fieldValue => `${fieldValue} must be a valid integer`,\n        };\n\n        const isPositiveIntegerValidator = {\n            isValid : fieldValue => parseInt(fieldValue) > 0,\n            errorMessage : fieldValue => `${fieldValue} must be greater than 0.`,\n        };\n\n        return validateForm([\n            {\n                name : \"Total units enrolled\",\n                characterLimit : null,\n                value : this.state.form.total_units_enrolled,\n                customValidators : [isValidIntegerValidator, isPositiveIntegerValidator],\n            },\n        ]);\n    }\n\n    render() {\n\n        const { formHasErrors, fieldErrors } = this.getFormErrors();\n\n        function isValid(fieldName) {\n            return fieldErrors[fieldName].length === 0;\n        }\n\n        function fieldError(fieldName) {\n            return fieldErrors[fieldName][0];\n        }\n\n        console.log(formHasErrors, fieldErrors, isValid(\"Total units enrolled\"));\n\n\n        return (\n            <Modal isOpen={this.props.isOpen}\n                   toggle={this.props.toggle}\n                   backdrop={true}>\n                <ModalHeader toggle={this.props.toggle}>\n                    Accept Student\n                </ModalHeader>\n                <ModalBody className=\"form\">\n                    <Form>\n                        <FormGroup>\n                            <Label>Total Units Enrolled</Label>\n                            <Input placeholder=\"Total Units Enrolled\"\n                                   onChange={this.getChangeHandler(\"total_units_enrolled\")}\n                                   valid={isValid(\"Total units enrolled\")}\n                                   value={this.state.form.total_units_enrolled}/>\n                            <FormFeedback>{fieldError(\"Total units enrolled\")}</FormFeedback>\n                        </FormGroup>\n                    </Form>\n                </ModalBody>\n                <ModalFooter>\n                    <Button outline\n                            color=\"success\"\n                            onClick={this.acceptStudent}\n                            disabled={formHasErrors}>\n                        Accept Student\n                    </Button>\n                </ModalFooter>\n\n            </Modal>\n        );\n    }\n}\n\n\nexport {\n    DeployApplicantModal,\n    AcceptApplicantModal,\n};"]}